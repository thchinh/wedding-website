(()=>{var A=(()=>{let o='<span class="spinner-border spinner-border-sm my-0 ms-0 me-1 p-0" style="height: 0.8rem; width: 0.8rem;"></span>',a=[["*",'<strong class="text-theme-auto">$1</strong>'],["_",'<em class="text-theme-auto">$1</em>'],["~",'<del class="text-theme-auto">$1</del>'],["```",'<code class="font-monospace text-theme-auto">$1</code>']],u=[{type:"Mobile",regex:/Android.*Mobile|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i},{type:"Tablet",regex:/iPad|Android(?!.*Mobile)|Tablet/i},{type:"Desktop",regex:/Windows NT|Macintosh|Linux/i}],c=[{name:"Chrome",regex:/Chrome|CriOS/i},{name:"Safari",regex:/Safari/i},{name:"Edge",regex:/Edg|Edge/i},{name:"Firefox",regex:/Firefox|FxiOS/i},{name:"Opera",regex:/Opera|OPR/i},{name:"Internet Explorer",regex:/MSIE|Trident/i},{name:"Samsung Browser",regex:/SamsungBrowser/i}],g=[{name:"Windows",regex:/Windows NT ([\d.]+)/i},{name:"MacOS",regex:/Mac OS X ([\d_.]+)/i},{name:"Android",regex:/Android ([\d.]+)/i},{name:"iOS",regex:/OS ([\d_]+) like Mac OS X/i},{name:"Linux",regex:/Linux/i},{name:"Ubuntu",regex:/Ubuntu/i},{name:"Chrome OS",regex:/CrOS/i}],t=n=>String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),m=n=>{let w=T=>{window.alert(`${T} ${n}`)};return{success:()=>w("\u{1F7E9}"),error:()=>w("\u{1F7E5}"),warning:()=>w("\u{1F7E8}"),info:()=>w("\u{1F7E6}"),custom:T=>w(T)}},h=n=>window.confirm(`\u{1F7E6} ${n}`),d=(n,w)=>(n.replaceChildren(document.createRange().createContextualFragment(w)),n),y=(n,w,T=.05)=>new Promise(s=>{let i=parseFloat(n.style.opacity),S=w?1:0,E=()=>{i+=w?T:-T,i=Math.max(0,Math.min(1,i)),n.style.opacity=i.toFixed(2),w&&i>=S||!w&&i<=S?(n.style.opacity=S.toString(),s(n)):requestAnimationFrame(E)};requestAnimationFrame(E)}),l=(n,w=0)=>{let T=null;T=setTimeout(()=>{n(),clearTimeout(T),T=null},w)};return{loader:o,ask:h,copy:async(n,w=null,T=1500)=>{let s=n.getAttribute("data-copy");if(!s||s.length===0){m("Nothing to copy").warning();return}n.disabled=!0;try{await navigator.clipboard.writeText(s)}catch{n.disabled=!1,m("Failed to copy").error();return}let i=n.innerHTML;d(n,w||'<i class="fa-solid fa-check"></i>'),l(()=>{n.disabled=!1,n.innerHTML=i},T)},notify:m,timeOut:l,debounce:(n,w=100)=>{let T=null;return(...s)=>{clearTimeout(T),T=setTimeout(()=>n(...s),w)}},escapeHtml:t,base64Encode:n=>{let T=new TextEncoder().encode(n);return window.btoa(String.fromCharCode(...T))},base64Decode:n=>{let w=new TextDecoder,T=Uint8Array.from(window.atob(n),s=>s.charCodeAt(0));return w.decode(T)},disableButton:(n,w="Loading",T=!1)=>{n.disabled=!0;let s=n.innerHTML;return d(n,T?w:o+w),{restore:(i=!1)=>{n.innerHTML=s,n.disabled=i}}},disableCheckbox:n=>{n.disabled=!0;let w=document.querySelector(`label[for="${n.id}"]`),T=w.innerHTML;return d(w,o+T),{restore:()=>{w.innerHTML=T,n.disabled=!1}}},safeInnerHTML:d,parseUserAgent:n=>{if(!n||typeof n!="string")return"Unknown";let w=u.find(E=>E.regex.test(n))?.type??"Unknown",T=c.find(E=>E.regex.test(n))?.name??"Unknown",s=g.find(E=>E.regex.test(n)),i=s?s.name:"Unknown",S=s?n.match(s.regex)?.[1]?.replace(/_/g,".")??null:null;return`${T} ${w} ${S?`${i} ${S}`:i}`},changeOpacity:y,getGMTOffset:n=>{let w=new Date,T=new Intl.DateTimeFormat("en-US",{timeZone:n,hourCycle:"h23",hour:"numeric"}),s=(parseInt(T.format(w))-w.getUTCHours()+24)%24;return s>12&&(s-=24),`GMT${s>=0?"+":""}${s}`},convertMarkdownToHTML:n=>(a.forEach(([w,T])=>{n=n.replace(new RegExp(`\\${w}(\\S(?:[\\s\\S]*?\\S)?)\\${w}`,"g"),T)}),n)}})();var R=o=>{let a=(m=null)=>{let h=JSON.parse(localStorage.getItem(o));return m?h[String(m)]:h},u=(m,h)=>{let d=a();d[String(m)]=h,localStorage.setItem(o,JSON.stringify(d))},c=m=>Object.keys(a()).includes(String(m)),g=m=>{if(!c(m))return;let h=a();delete h[String(m)],localStorage.setItem(o,JSON.stringify(h))},t=()=>localStorage.setItem(o,"{}");return localStorage.getItem(o)||t(),{set:u,get:a,has:c,clear:t,unset:g}};var G=(()=>{let o=({uuid:l,own:e,name:r,presence:b,comment:x,created_at:p,is_admin:f,is_parent:v,gif_url:C,ip:L,user_agent:n,comments:w,like_count:T})=>({uuid:l,own:e,name:r,presence:b,comment:x,created_at:p,is_admin:f??!1,is_parent:v,gif_url:C,ip:L,user_agent:n,comments:w?.map(o)??[],like_count:T??0}),a=l=>l.map(o);return{uuidResponse:({uuid:l})=>({uuid:l}),tokenResponse:({token:l})=>({token:l}),statusResponse:({status:l})=>({status:l}),getCommentResponse:o,getCommentsResponse:a,getCommentsResponseV2:l=>({count:l.count,lists:a(l.lists)}),commentShowMore:(l,e=!1)=>({uuid:l,show:e}),postCommentRequest:(l,e,r,b,x)=>({id:l,name:e,presence:r,comment:b,gif_id:x}),postSessionRequest:(l,e)=>({email:l,password:e}),updateCommentRequest:(l,e,r)=>({presence:l,comment:e,gif_id:r})}})();var V="POST";var z="AbortError",me="TypeError",W={Accept:"application/json","Content-Type":"application/json"},J="request",U=(()=>{let o=null;return{getInstance:a=>{if(!o||!o.has(a))throw new Error(`please init cache first: ${a}`);return o.get(a)},restart:async a=>{o.set(a,null),o.delete(a),await window.caches.delete(a),await window.caches.open(a).then(u=>o.set(a,u))},init:(a,u=[])=>{if(!window.isSecureContext)throw new Error("this application required secure context");o=new Map,Promise.all(u.concat([J]).map(c=>window.caches.open(c).then(g=>o.set(c,g)))).then(()=>a())}}})(),j=o=>{let a=U.getInstance(o);return{set:(t,m,h,d)=>m.clone().arrayBuffer().then(y=>{if(!m.ok)return m;let l=new Date,e=new Headers(m.headers);if(e.has("Date")||e.set("Date",l.toUTCString()),h||!e.has("Cache-Control")){if(!h&&e.has("Expires")){let r=new Date(e.get("Expires"));d=Math.max(0,r.getTime()-l.getTime())}if(d===0)throw new Error("Cache max age cannot be 0");e.set("Cache-Control",`public, max-age=${Math.floor(d/1e3)}`)}return e.has("Content-Length")||e.set("Content-Length",String(y.byteLength)),a.put(t,new Response(y,{headers:e})).then(()=>m)}),has:t=>a.match(t).then(m=>{if(!m)return null;let h=m.headers.get("Cache-Control").match(/max-age=(\d+)/)[1],d=Date.parse(m.headers.get("Date"))+parseInt(h)*1e3;return Date.now()>d?null:m}),del:t=>a.delete(t)}},O=(o,a)=>{let u=new AbortController,c={signal:u.signal,credential:"include",headers:new Headers(W),method:String(o).toUpperCase()},g=0,t=0,m=0,h=0,d=!1,y=!1,l=null,e=null,r=null,b=p=>{let f=()=>{let C=()=>window.fetch(p,c).then(async n=>{if(d)return u.abort(),new Response(null,{status:n.status,statusText:n.statusText,headers:new Headers(n.headers)});if(!n.ok||!r)return n;let w=parseInt(n.headers.get("Content-Length")??0);if(w===0)return n;let T=[],s=0,i=n.body.getReader();for(;;){let{done:E,value:P}=await i.read();if(E)break;T.push(P),s+=P.length,await r(s,w,window.structuredClone?window.structuredClone(T):T)}let S=n.headers.get("Content-Type")??"application/octet-stream";return new Response(new Blob(T,{type:S}),{status:n.status,statusText:n.statusText,headers:new Headers(n.headers)})});if(g===0||d)return C();if(c.method!=="GET")return console.warn("Only method GET can be cached"),C();let L=j(J);return L.has(p).then(n=>n?Promise.resolve(n):L.del(p).then(C).then(w=>L.set(p,w,y,g)))};if(t===0||m===0)return f();let v=async()=>{try{return await f()}catch(C){if(C.name===z)throw C;if(m*=2,h++,h>t)throw new Error(`Max retries reached: ${C}`);return console.warn(`Retrying fetch (${h}/${t}): ${p.toString()}`),await new Promise(L=>window.setTimeout(L,m)),v()}};return v()},x=p=>{if(p.status!==200)return Promise.resolve(p);let f=document.querySelector("a[download]");f&&document.body.removeChild(f);let v=p.headers.get("Content-Disposition")?.match(/filename="(.+)"/)?.[1];return p.clone().blob().then(C=>{let L=document.createElement("a"),n=window.URL.createObjectURL(C);return L.href=n,L.download=v||`${e}.${l||(C.type.split("/")?.[1]??"bin")}`,document.body.appendChild(L),L.click(),document.body.removeChild(L),window.URL.revokeObjectURL(n),p})};return{send(p=null){return e&&Object.keys(W).forEach(f=>c.headers.delete(f)),b(new URL(a,document.body.getAttribute("data-url"))).then(f=>e&&f.ok?x(f).then(v=>({code:v.status,data:v,error:null})):f.json().then(v=>{if(v.error){let C=v.error.at(0),L=f.status>=500;throw new Error(L?`ID: ${v.id}
\u{1F7E5} ${C}`:`\u{1F7E8} ${C}`)}return p&&(v.data=p(v.data)),Object.assign(v,{code:f.status})})).catch(f=>{if(f.name===z)return console.warn("Fetch aborted:",f),f;throw f.name===me&&(f=new Error("\u{1F7E5} Network error or rate limit exceeded")),alert(f.message??String(f)),f})},withCache(p=1e3*60*60*6){return g=p,this},withForceCache(p=1e3*60*60*6){return y=!0,g===0&&(g=p),this},withNoBody(){return d=!0,this},withRetry(p=3,f=1e3){return t=p,m=f,this},withCancel(p){return p==null?this:((async()=>(await p,u.abort()))(),this)},withDownload(p,f=null){return e=p,l=f,this},withProgressFunc(p=null){return r=p,this},default(p=null){return c.headers=new Headers(p??{}),b(a).then(f=>e?x(f):Promise.resolve(f))},token(p){return p.split(".").length===3?(c.headers.append("Authorization","Bearer "+p),this):(c.headers.append("x-access-key",p),this)},body(p){if(c.method==="GET")throw new Error("GET method does not support body");return c.body=JSON.stringify(p),this}}};var K=(()=>{let o=null,a=()=>o.get("token"),u=l=>o.set("token",l),c=l=>O(V,"/api/session").body(l).send(G.tokenResponse).then(e=>(e.code===200&&u(e.data.token),e.code===200)),g=()=>o.unset("token"),t=()=>String(a()??".").split(".").length===3,m=l=>O("GET","/api/v2/config").withCache(1e3*60*30).withForceCache().token(l).send().then(e=>{if(e.code!==200)throw new Error("failed to get config.");let r=R("config");for(let[b,x]of Object.entries(e.data))r.set(b,x);return u(l),e}),h=()=>{if(!t())return null;try{return JSON.parse(A.base64Decode(a().split(".")[1]))}catch{return null}};return{init:()=>{o=R("session")},guest:m,isValid:()=>t()?(h()?.exp??0)>Date.now()/1e3:!1,login:c,logout:g,decode:h,isAdmin:t,setToken:u,getToken:a}})();var q=(()=>{let o={"#000000":"#ffffff","#ffffff":"#000000","#212529":"#f8f9fa","#f8f9fa":"#212529"},a=["#ffffff","#f8f9fa"],u=["#000000","#212529"],c=!1,g=null,t=null,m=()=>g.set("active","light"),h=()=>g.set("active","dark"),d=f=>{let v=t.getAttribute("content");t.setAttribute("content",f.some(C=>C===v)?o[v]:v)},y=()=>{m(),document.documentElement.setAttribute("data-bs-theme","light"),d(u)},l=()=>{h(),document.documentElement.setAttribute("data-bs-theme","dark"),d(a)},e=(f=null,v=null)=>{let C=g.get("active")==="dark";return f&&v?C?f:v:C};return{init:()=>{switch(g=R("theme"),t=document.querySelector('meta[name="theme-color"]'),g.has("active")||(window.matchMedia("(prefers-color-scheme: dark)").matches?h():m()),document.documentElement.getAttribute("data-bs-theme")){case"dark":h();break;case"light":m();break;default:c=!0}e()?l():y()},spyTop:()=>{let f=C=>C.filter(L=>L.isIntersecting).forEach(L=>{let n=L.target.classList.contains("bg-white-black")?e(u[0],a[0]):e(u[1],a[1]);t.setAttribute("content",n)}),v=new IntersectionObserver(f,{rootMargin:"0% 0% -95% 0%"});document.querySelectorAll("section").forEach(C=>v.observe(C))},change:()=>e()?y():l(),isDarkMode:e,isAutoMode:()=>c}})();var Q={tab:u=>window.bootstrap.Tab.getOrCreateInstance(document.getElementById(u)),modal:u=>window.bootstrap.Modal.getOrCreateInstance(document.getElementById(u))};var X=()=>window.confetti.shapeFromPath({path:"M256 472c-6-4-120-79-177-145C49 292 32 259 32 220 32 154 84 104 150 104c39 0 75 18 98 48 23-30 59-48 98-48 66 0 118 50 118 116 0 39-17 72-47 107-57 66-171 141-177 145-3 2-6 2-9 0z",matrix:[.06,0,0,.06,-15,-15]}),Y=()=>{window.confetti&&window.confetti({origin:{y:1},zIndex:1057})},Z=(o=3e4)=>{if(!window.confetti)return;let a=8,u=3,c=o*1e3,g=performance.now()+c,t=1e3/Math.max(1,a),m=X(),h=["#FFC0CB","#FF1493","#e70e0eff"],d=(e,r)=>Math.random()*(r-e)+e,y=0;function l(e){if(!(e>=g)){if(e-y>=t){y=e;let r=g-e,b=h[Math.random()*h.length|0];for(let x=0;x<u;x++)window.confetti({particleCount:1,startVelocity:0,ticks:Math.max(50,75*(r/c)),origin:{x:Math.random(),y:Math.abs(Math.random()-r/c)},zIndex:1057,colors:[b],shapes:[m],drift:d(-.5,.5),gravity:d(.5,1),scalar:d(.5,1)})}requestAnimationFrame(l)}}requestAnimationFrame(l)},ee=(o,a=50)=>{if(!window.confetti)return;let u=Date.now()+a,c=o.getBoundingClientRect(),g=Math.max(.3,Math.min(1,c.top/window.innerHeight+.2)),t=X(),m=["#FF69B4","#FF1493"],h=()=>{m.forEach(d=>{window.confetti({particleCount:2,angle:60,spread:55,shapes:[t],origin:{x:c.left/window.innerWidth,y:g},zIndex:1057,colors:[d]}),window.confetti({particleCount:2,angle:120,spread:55,shapes:[t],origin:{x:c.right/window.innerWidth,y:g},zIndex:1057,colors:[d]})}),Date.now()<u&&requestAnimationFrame(h)};requestAnimationFrame(h)};var B=o=>{let a=new Map,u=new Map,c=j(o),g=1e3*60*60*6,t=!1,m=(r,b)=>{if(!b.ok)throw new Error(b.statusText);return c.set(r,b,t,g)},h=r=>c.has(r),d=r=>c.del(r),y=(r,b=null)=>{if(a.has(r))return Promise.resolve(a.get(r));if(u.has(r))return u.get(r);let x=()=>O("GET",r).withCancel(b).withRetry().default(),p=h(r).then(f=>f?Promise.resolve(f):d(r).then(x).then(v=>m(r,v))).then(f=>f.blob()).then(f=>a.set(r,URL.createObjectURL(f))).then(()=>a.get(r)).finally(()=>u.delete(r));return u.set(r,p),p};return{run:(r,b=null)=>{let x=new Map;return r.length===0?Promise.resolve():(r.filter(p=>p!==null).forEach(p=>{let f=x.get(p.url)??[];x.set(p.url,[...f,[p.res,p?.rej]])}),Promise.allSettled(Array.from(x).map(([p,f])=>y(p,b).then(v=>(f.forEach(C=>C[0]?.(v)),v)).catch(v=>(f.forEach(C=>C[1]?.(v)),v)))))},del:d,has:h,set:m,get:y,open,download:async(r,b)=>{if(!new Map(Array.from(a.entries()).map(([p,f])=>[f,p])).has(r))try{if(!new URL(r).protocol.includes("blob"))throw new Error("Is not blob")}catch{r=await y(r)}return O("GET",r).withDownload(b).default()},setTtl(r){return g=Number(r),this},withForceCache(){return t=!0,this}}};var pe=o=>{let a="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css",u="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js",c=()=>o.get(a).then(t=>new Promise((m,h)=>{let d=document.createElement("link");d.onload=m,d.onerror=h,d.rel="stylesheet",d.href=t,document.head.appendChild(d)})),g=()=>o.get(u).then(t=>new Promise((m,h)=>{let d=document.createElement("script");d.onload=m,d.onerror=h,d.src=t,document.head.appendChild(d)}));return Promise.all([c(),g()]).then(()=>{if(typeof window.AOS>"u")throw new Error("AOS library failed to load");window.AOS.init()})},ge=o=>o.get("https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.js").then(u=>new Promise((c,g)=>{let t=document.createElement("script");t.onerror=g,t.onload=()=>{typeof window.confetti>"u"?g(new Error("Confetti library failed to load")):c()},t.src=u,document.head.appendChild(t)})),fe=o=>{let a=[{css:"https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic&display=swap",family:"Noto Naskh Arabic"},{css:"https://fonts.googleapis.com/css2?family=Lato&display=swap",family:"Lato"}],u=({css:c,family:g})=>o.get(c).then(t=>new Promise((m,h)=>{let d=document.createElement("link");d.onload=m,d.onerror=h,d.rel="stylesheet",d.href=t,document.head.appendChild(d)})).then(()=>document.fonts.load(`1em "${g}"`));return Promise.all(a.map(u))},te=(o={})=>{let a=[],u=B("libs").withForceCache();return(o?.aos??!0)&&a.push(pe(u)),(o?.confetti??!0)&&a.push(ge(u)),(o?.additionalFont??!0)&&a.push(fe(u)),Promise.all(a)};var I=(()=>{let o=null,a=null,u=0,c=0,g=!0,t=null;return{init:()=>{o=document.getElementById("progress-info"),a=document.getElementById("progress-bar"),o.classList.remove("d-none")},add:()=>{u+=1},invalid:e=>{g&&(g=!1,a.style.backgroundColor="red",o.innerText=`Error loading ${e}`,document.dispatchEvent(new Event("undangan.progress.invalid")))},complete:(e,r=!1)=>{g&&(c+=1,o.innerText="Loading Thi\u1EC7p m\u1EDDi...",a.style.width=Math.min(c/u*100,100).toString()+"%",c===u&&(g=!1,t=null,document.dispatchEvent(new Event("undangan.progress.done"))))},getAbort:()=>t}})();var ne=(()=>{let o='<i class="fa-solid fa-circle-pause spin-button"></i>',a='<i class="fa-solid fa-circle-play"></i>',u=async(t=!0)=>{let m=document.body.getAttribute("data-audio");if(!m){I.complete("audio",!0);return}let h=null;try{h=new Audio(await B("audio").withForceCache().get(m,I.getAbort())),h.loop=!0,h.muted=!1,h.autoplay=!1,h.controls=!1,I.complete("audio")}catch{I.invalid("audio");return}let d=!1,y=document.getElementById("button-music"),l=async()=>{if(!(!navigator.onLine||!y)){y.disabled=!0;try{await h.play(),d=!0,y.disabled=!1,y.innerHTML=o}catch(r){d=!1,A.notify(r).error()}}},e=()=>{d=!1,h.pause(),y.innerHTML=a};document.addEventListener("undangan.open",()=>{y.classList.remove("d-none"),t&&l()}),y.addEventListener("offline",e),y.addEventListener("click",()=>d?e():l())},c=()=>{let t=document.getElementById("button-scroll-top");t&&t.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})};return{init:()=>(c(),{load:u})}})();var oe=(()=>{let o=null,a=null,u=[],c=e=>new Promise((r,b)=>{let x=new Image;x.onload=()=>r(x),x.onerror=b,x.src=e}),g=(e,r)=>c(r).then(b=>{e.width=b.naturalWidth,e.height=b.naturalHeight,e.classList.remove("opacity-0"),e.src=b.src,b.remove(),I.complete("image")}),t=e=>{u.push({url:e.getAttribute("data-src"),res:r=>g(e,r),rej:r=>{console.error(r),I.invalid("image")}})},m=e=>{e.onerror=()=>I.invalid("image"),e.onload=()=>{e.width=e.naturalWidth,e.height=e.naturalHeight,I.complete("image")},e.complete&&e.naturalWidth!==0&&e.naturalHeight!==0?I.complete("image"):e.complete&&I.invalid("image")},h=()=>Array.from(o).some(e=>e.hasAttribute("data-src")),d=async()=>{let e=Array.from(o),r=async b=>{u.length=0,e.filter(b).forEach(x=>x.hasAttribute("data-src")?t(x):m(x)),await a.run(u,I.getAbort())};await r(b=>b.hasAttribute("fetchpriority")),await r(b=>!b.hasAttribute("fetchpriority"))},y=e=>{a.download(e,`${window.location.hostname}_image_${Date.now()}`)};return{init:()=>(a=B("image").withForceCache(),o=document.querySelectorAll("img"),{load:d,download:y,hasDataSrc:h})}})();var re=(()=>{let o=null,a=()=>{let c=document.getElementById("video-love-stroy");if(!c||!c.hasAttribute("data-src"))return c?.remove(),I.complete("video",!0),Promise.resolve();let g=c.getAttribute("data-src");if(!g)return I.complete("video",!0),Promise.resolve();let t=document.createElement("video");t.className=c.getAttribute("data-vid-class"),t.loop=!0,t.muted=!0,t.controls=!1,t.autoplay=!1,t.playsInline=!0,t.preload="metadata";let m=new IntersectionObserver(y=>y.forEach(l=>l.isIntersecting?t.play():t.pause())),h=y=>{t.preload="auto",t.controls=!0,t.disableRemotePlayback=!0,t.disablePictureInPicture=!0,t.controlsList="noremoteplayback nodownload noplaybackrate",t.src=URL.createObjectURL(y)},d=()=>{let y=document.getElementById("progress-bar-video-love-stroy"),l=document.getElementById("progress-info-video-love-stroy");return O("GET",g).withNoBody().default({Range:"bytes=0-1"}).then(e=>{if(e.status===200)return t.preload="none",t.src=A.escapeHtml(g),c.appendChild(t),Promise.resolve();if(e.status!==206)throw new Error("failed to fetch video");t.addEventListener("error",()=>I.invalid("video"));let r=new Promise(b=>t.addEventListener("loadedmetadata",b,{once:!0}));return t.src=A.escapeHtml(g),c.appendChild(t),r}).then(()=>{t.pause(),t.currentTime=0,I.complete("video");let e=t.getBoundingClientRect().width*(t.videoHeight/t.videoWidth);return t.style.height=`${e}px`,c.style.height=`${e}px`,O("GET",g).withRetry().withProgressFunc((r,b)=>{let x=Number(r/b*100).toFixed(0)+"%";y.style.width=x,l.innerText=x}).default()}).then(e=>e.clone().blob().then(r=>{let b=new Promise(x=>t.addEventListener("loadedmetadata",x,{once:!0}));return h(r),t.load(),b.then(()=>e)})).catch(e=>{y.style.backgroundColor="red",l.innerText="Error loading video",console.error(e)})};return o.has(g).then(y=>y?y.blob().then(l=>{let e=new Promise(r=>t.addEventListener("loadedmetadata",r,{once:!0}));return h(l),c.appendChild(t),e.then(()=>I.complete("video"))}):o.del(g).then(d).then(l=>o.set(g,l))).then(()=>{m.observe(t),t.style.removeProperty("height"),c.style.removeProperty("height"),document.getElementById("video-love-stroy-loading")?.remove()})};return{init:()=>(o=B("video").withForceCache(),{load:a})}})();var se="131020",$="261020",ae=(()=>{let o=null,a=null,u=()=>{let i=window.location.search.replace("?","").split("&").find(E=>E.startsWith("m="))?.split("=")[1];return[$,se].includes(i)?i:$},c=()=>{let i=window.location.search.replace("?","").split("&").find(E=>E.startsWith("t="))?.split("=")[1],S=parseInt(i);return isNaN(S)||S<0||S>23?"18":S.toString().padStart(2,"0")},g=()=>{let s=u(),i=s===$?"2025-11-23 11:30":`2025-11-22 ${c()}:00`,S=s===$?"23-11-2025":"22-11-2025";document.body.setAttribute("data-time",i),document.querySelectorAll(".date-start").forEach(E=>{E.textContent=S}),s===se&&(document.getElementById("invite-time").textContent=`${c()}:00`)},t=()=>{let s=new Date(document.body.getAttribute("data-time").replace(" ","T")).getTime(),i=k=>k<10?`0${k}`:`${k}`,S=document.getElementById("day"),E=document.getElementById("hour"),P=document.getElementById("minute"),M=document.getElementById("second"),H=()=>{let k=Math.abs(s-Date.now());S.textContent=i(Math.floor(k/(1e3*60*60*24))),E.textContent=i(Math.floor(k%(1e3*60*60*24)/(1e3*60*60))),P.textContent=i(Math.floor(k%(1e3*60*60)/(1e3*60))),M.textContent=i(Math.floor(k%(1e3*60)/1e3)),A.timeOut(H,1e3-Date.now()%1e3)};A.timeOut(H)},m=()=>{let s=window.location.search.split("to="),i=null;if(s.length>1&&s[1].length>=1&&(i=window.decodeURIComponent(s[1])),i){let S=document.getElementById("guest-name"),E=document.createElement("div");E.classList.add("m-2");let P=`<small class="mt-0 mb-1 mx-0 p-0">${A.escapeHtml(S?.getAttribute("data-message"))}</small><p class="m-0 p-0" style="font-size: 1.25rem">${A.escapeHtml(i)}</p>`;A.safeInnerHTML(E,P),S?.appendChild(E)}},h=async()=>{let i=document.querySelectorAll(".slide-desktop");if(!i||i.length===0)return;let S=document.getElementById("root")?.querySelector(".d-sm-block");if(!S||(S.dispatchEvent(new Event("undangan.slide.stop")),window.getComputedStyle(S).display==="none"))return;if(i.length===1){await A.changeOpacity(i[0],!0);return}let E=0;for(let[k,N]of i.entries())if(k===E){N.classList.add("slide-desktop-active"),await A.changeOpacity(N,!0);break}let P=!0,M=async()=>(await A.changeOpacity(i[E],!1),i[E].classList.remove("slide-desktop-active"),E=(E+1)%i.length,P&&(i[E].classList.add("slide-desktop-active"),await A.changeOpacity(i[E],!0)),P);S.addEventListener("undangan.slide.stop",()=>{P=!1});let H=async()=>{await M()&&A.timeOut(H,6e3)};A.timeOut(H,6e3)},d=async()=>{let i=window.location.search.replace("?","").split("&").find(M=>M.startsWith("g="))?.split("=")[1]||"1",P=(await(await fetch("./assets/guests/data.json")).json()).find(M=>M.id===i);P&&(document.getElementById("form-name").value=P.name,document.getElementById("guest-name").innerHTML=P.name)},y=()=>{let s=u();document.getElementById(s)?.classList.toggle("d-none");let i=document.getElementById(`time-${s}`);i&&i.classList.toggle("d-none")},l=s=>{s.disabled=!0,document.body.scrollIntoView({behavior:"instant"}),document.getElementById("root").classList.remove("opacity-0"),q.isAutoMode()&&document.getElementById("button-theme").classList.remove("d-none"),h(),q.spyTop(),Y(),A.timeOut(Z,1500),document.dispatchEvent(new Event("undangan.open")),A.changeOpacity(document.getElementById("welcome"),!1).then(i=>i.remove()),d(),y()},e=s=>{document.getElementById("button-modal-click").setAttribute("href",s.src),document.getElementById("button-modal-download").setAttribute("data-src",s.src);let i=document.getElementById("show-modal-image");i.src=s.src,i.width=s.width,i.height=s.height,Q.modal("modal-image").show()},r=()=>{document.getElementById("show-modal-image").addEventListener("click",s=>{let i=s.currentTarget.parentNode.querySelector(".position-absolute");i.classList.contains("d-none")?i.classList.replace("d-none","d-flex"):i.classList.replace("d-flex","d-none")})},b=s=>{navigator.vibrate&&navigator.vibrate(500),ee(s,100),A.changeOpacity(s,!1).then(i=>i.remove())},x=()=>o.set("info",!0),p=()=>{document.querySelectorAll(".font-arabic").forEach(s=>{s.innerHTML=String(s.innerHTML).normalize("NFC")})},f=()=>{document.querySelectorAll("svg").forEach(s=>{s.hasAttribute("data-class")&&A.timeOut(()=>s.classList.add(s.getAttribute("data-class")),parseInt(s.getAttribute("data-time")))})},v=()=>{let s=k=>new Date(k.replace(" ","T")+":00Z").toISOString().replace(/[-:]/g,"").split(".").shift(),i=document.body.getAttribute("data-time"),E=((k,N=5)=>{let D=new Date(k.replace(" ","T"));D.setHours(D.getHours()+N);let ie=D.getFullYear(),ce=String(D.getMonth()+1).padStart(2,"0"),de=String(D.getDate()).padStart(2,"0"),le=String(D.getHours()).padStart(2,"0"),ue=String(D.getMinutes()).padStart(2,"0");return`${ie}-${ce}-${de} ${le}:${ue}`})(i,5),P=u(),M=new URL("https://calendar.google.com/calendar/render"),H=new URLSearchParams({action:"TEMPLATE",text:"L\u1EC5 c\u01B0\u1EDBi H\u1EEFu Chinh & Thanh Tr\xFAc",dates:`${s(i)}/${s(E)}`,details:"Ch\xFAng t\xF4i h\xE2n h\u1EA1nh m\u1EDDi Qu\xFD v\u1ECB \u0111\u1EBFn chung vui trong ng\xE0y tr\u1ECDng \u0111\u1EA1i c\u1EE7a ch\xFAng t\xF4i. S\u1EF1 c\xF3 m\u1EB7t v\xE0 l\u1EDDi ch\xFAc c\u1EE7a Qu\xFD v\u1ECB ch\xEDnh l\xE0 m\xF3n qu\xE0 \xFD ngh\u0129a nh\u1EA5t.",location:P===$?"5J8P+HC7, Th\u1EA1nh Tr\u1ECB, B\xECnh \u0110\u1EA1i, B\u1EBFn Tre":"5PC2+9Q2 B\xECnh \u0110\u1EA1i, B\u1EBFn Tre",ctz:a.get("vn")});M.search=H.toString(),document.querySelector("#home button")?.addEventListener("click",()=>window.open(M,"_blank"))},C=()=>({load:i=>{te(i).then(()=>I.complete("libs")).catch(()=>I.invalid("libs"))}}),L=async()=>{g(),f(),t(),m(),r(),p(),v(),o.has("presence")&&(document.getElementById("form-presence").value=o.get("presence")?"1":"2"),o.get("info")&&document.getElementById("information")?.remove(),await A.changeOpacity(document.getElementById("welcome"),!0),await A.changeOpacity(document.getElementById("loading"),!1).then(s=>s.remove())},n=()=>{I.init(),a=R("config"),o=R("information");let s=re.init(),i=oe.init(),S=ne.init(),E=C();L(),window.addEventListener("resize",A.debounce(h)),document.addEventListener("hide.bs.modal",()=>document.activeElement?.blur()),document.getElementById("button-modal-download").addEventListener("click",P=>{i.download(P.currentTarget.getAttribute("data-src"))}),s.load(),i.load(),S.load(),E.load({confetti:document.body.getAttribute("data-confetti")==="true",additionalFont:!0}),document.dispatchEvent(new Event("undangan.session"))},w=s=>{let i=document.getElementById("form-name");if(i.value.length===0){A.notify("Vui l\xF2ng \u0111i\u1EC1n t\xEAn!").warning(),i.focus();return}let S=document.getElementById("form-presence");if(S&&S.value==="0"){A.notify("Vui l\xF2ng ch\u1ECDn tr\u1EA1ng th\xE1i tham d\u1EF1.").warning();return}let E=document.getElementById("form-comment");if(E&&!E.value){A.notify("Vui l\xF2ng nh\u1EADp l\u1EDDi ch\xFAc c\u1EE7a b\u1EA1n.").warning();return}A.notify("C\u1EA3m \u01A1n b\u1EA1n \u0111\xE3 g\u1EEDi l\u1EDDi ch\xFAc.").info(),s.disabled=!0};return{init:()=>(q.init(),K.init(),window.addEventListener("load",()=>{U.init(n,["image","video","audio","libs"])}),{sendComment:w,util:A,theme:q,guest:{open:l,modal:e,showStory:b,closeInformation:x}})}})();(o=>{o.undangan=ae.init()})(window);})();
