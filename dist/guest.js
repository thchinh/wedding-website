(()=>{var x=(()=>{let o='<span class="spinner-border spinner-border-sm my-0 ms-0 me-1 p-0" style="height: 0.8rem; width: 0.8rem;"></span>',s=[["*",'<strong class="text-theme-auto">$1</strong>'],["_",'<em class="text-theme-auto">$1</em>'],["~",'<del class="text-theme-auto">$1</del>'],["```",'<code class="font-monospace text-theme-auto">$1</code>']],h=[{type:"Mobile",regex:/Android.*Mobile|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i},{type:"Tablet",regex:/iPad|Android(?!.*Mobile)|Tablet/i},{type:"Desktop",regex:/Windows NT|Macintosh|Linux/i}],a=[{name:"Chrome",regex:/Chrome|CriOS/i},{name:"Safari",regex:/Safari/i},{name:"Edge",regex:/Edg|Edge/i},{name:"Firefox",regex:/Firefox|FxiOS/i},{name:"Opera",regex:/Opera|OPR/i},{name:"Internet Explorer",regex:/MSIE|Trident/i},{name:"Samsung Browser",regex:/SamsungBrowser/i}],p=[{name:"Windows",regex:/Windows NT ([\d.]+)/i},{name:"MacOS",regex:/Mac OS X ([\d_.]+)/i},{name:"Android",regex:/Android ([\d.]+)/i},{name:"iOS",regex:/OS ([\d_]+) like Mac OS X/i},{name:"Linux",regex:/Linux/i},{name:"Ubuntu",regex:/Ubuntu/i},{name:"Chrome OS",regex:/CrOS/i}],n=e=>String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),l=e=>{let i=m=>{window.alert(`${m} ${e}`)};return{success:()=>i("\u{1F7E9}"),error:()=>i("\u{1F7E5}"),warning:()=>i("\u{1F7E8}"),info:()=>i("\u{1F7E6}"),custom:m=>i(m)}},f=e=>window.confirm(`\u{1F7E6} ${e}`),c=(e,i)=>(e.replaceChildren(document.createRange().createContextualFragment(i)),e),y=(e,i,m=.05)=>new Promise(T=>{let C=parseFloat(e.style.opacity),I=i?1:0,L=()=>{C+=i?m:-m,C=Math.max(0,Math.min(1,C)),e.style.opacity=C.toFixed(2),i&&C>=I||!i&&C<=I?(e.style.opacity=I.toString(),T(e)):requestAnimationFrame(L)};requestAnimationFrame(L)}),d=(e,i=0)=>{let m=null;m=setTimeout(()=>{e(),clearTimeout(m),m=null},i)};return{loader:o,ask:f,copy:async(e,i=null,m=1500)=>{let T=e.getAttribute("data-copy");if(!T||T.length===0){l("Nothing to copy").warning();return}e.disabled=!0;try{await navigator.clipboard.writeText(T)}catch{e.disabled=!1,l("Failed to copy").error();return}let C=e.innerHTML;c(e,i||'<i class="fa-solid fa-check"></i>'),d(()=>{e.disabled=!1,e.innerHTML=C},m)},notify:l,timeOut:d,debounce:(e,i=100)=>{let m=null;return(...T)=>{clearTimeout(m),m=setTimeout(()=>e(...T),i)}},escapeHtml:n,base64Encode:e=>{let m=new TextEncoder().encode(e);return window.btoa(String.fromCharCode(...m))},base64Decode:e=>{let i=new TextDecoder,m=Uint8Array.from(window.atob(e),T=>T.charCodeAt(0));return i.decode(m)},disableButton:(e,i="Loading",m=!1)=>{e.disabled=!0;let T=e.innerHTML;return c(e,m?i:o+i),{restore:(C=!1)=>{e.innerHTML=T,e.disabled=C}}},disableCheckbox:e=>{e.disabled=!0;let i=document.querySelector(`label[for="${e.id}"]`),m=i.innerHTML;return c(i,o+m),{restore:()=>{i.innerHTML=m,e.disabled=!1}}},safeInnerHTML:c,parseUserAgent:e=>{if(!e||typeof e!="string")return"Unknown";let i=h.find(L=>L.regex.test(e))?.type??"Unknown",m=a.find(L=>L.regex.test(e))?.name??"Unknown",T=p.find(L=>L.regex.test(e)),C=T?T.name:"Unknown",I=T?e.match(T.regex)?.[1]?.replace(/_/g,".")??null:null;return`${m} ${i} ${I?`${C} ${I}`:C}`},changeOpacity:y,getGMTOffset:e=>{let i=new Date,m=new Intl.DateTimeFormat("en-US",{timeZone:e,hourCycle:"h23",hour:"numeric"}),T=(parseInt(m.format(i))-i.getUTCHours()+24)%24;return T>12&&(T-=24),`GMT${T>=0?"+":""}${T}`},convertMarkdownToHTML:e=>(s.forEach(([i,m])=>{e=e.replace(new RegExp(`\\${i}(\\S(?:[\\s\\S]*?\\S)?)\\${i}`,"g"),m)}),e)}})();var k=o=>{let s=(l=null)=>{let f=JSON.parse(localStorage.getItem(o));return l?f[String(l)]:f},h=(l,f)=>{let c=s();c[String(l)]=f,localStorage.setItem(o,JSON.stringify(c))},a=l=>Object.keys(s()).includes(String(l)),p=l=>{if(!a(l))return;let f=s();delete f[String(l)],localStorage.setItem(o,JSON.stringify(f))},n=()=>localStorage.setItem(o,"{}");return localStorage.getItem(o)||n(),{set:h,get:s,has:a,clear:n,unset:p}};var q=(()=>{let o=({uuid:d,own:t,name:r,presence:b,comment:v,created_at:g,is_admin:w,is_parent:E,gif_url:S,ip:u,user_agent:e,comments:i,like_count:m})=>({uuid:d,own:t,name:r,presence:b,comment:v,created_at:g,is_admin:w??!1,is_parent:E,gif_url:S,ip:u,user_agent:e,comments:i?.map(o)??[],like_count:m??0}),s=d=>d.map(o);return{uuidResponse:({uuid:d})=>({uuid:d}),tokenResponse:({token:d})=>({token:d}),statusResponse:({status:d})=>({status:d}),getCommentResponse:o,getCommentsResponse:s,getCommentsResponseV2:d=>({count:d.count,lists:s(d.lists)}),commentShowMore:(d,t=!1)=>({uuid:d,show:t}),postCommentRequest:(d,t,r,b,v)=>({id:d,name:t,presence:r,comment:b,gif_id:v}),postSessionRequest:(d,t)=>({email:d,password:t}),updateCommentRequest:(d,t,r)=>({presence:d,comment:t,gif_id:r})}})();var U="POST";var D="AbortError",ee="TypeError",$={Accept:"application/json","Content-Type":"application/json"},N="request",_=(()=>{let o=null;return{getInstance:s=>{if(!o||!o.has(s))throw new Error(`please init cache first: ${s}`);return o.get(s)},restart:async s=>{o.set(s,null),o.delete(s),await window.caches.delete(s),await window.caches.open(s).then(h=>o.set(s,h))},init:(s,h=[])=>{if(!window.isSecureContext)throw new Error("this application required secure context");o=new Map,Promise.all(h.concat([N]).map(a=>window.caches.open(a).then(p=>o.set(a,p)))).then(()=>s())}}})(),F=o=>{let s=_.getInstance(o);return{set:(n,l,f,c)=>l.clone().arrayBuffer().then(y=>{if(!l.ok)return l;let d=new Date,t=new Headers(l.headers);if(t.has("Date")||t.set("Date",d.toUTCString()),f||!t.has("Cache-Control")){if(!f&&t.has("Expires")){let r=new Date(t.get("Expires"));c=Math.max(0,r.getTime()-d.getTime())}if(c===0)throw new Error("Cache max age cannot be 0");t.set("Cache-Control",`public, max-age=${Math.floor(c/1e3)}`)}return t.has("Content-Length")||t.set("Content-Length",String(y.byteLength)),s.put(n,new Response(y,{headers:t})).then(()=>l)}),has:n=>s.match(n).then(l=>{if(!l)return null;let f=l.headers.get("Cache-Control").match(/max-age=(\d+)/)[1],c=Date.parse(l.headers.get("Date"))+parseInt(f)*1e3;return Date.now()>c?null:l}),del:n=>s.delete(n)}},P=(o,s)=>{let h=new AbortController,a={signal:h.signal,credential:"include",headers:new Headers($),method:String(o).toUpperCase()},p=0,n=0,l=0,f=0,c=!1,y=!1,d=null,t=null,r=null,b=g=>{let w=()=>{let S=()=>window.fetch(g,a).then(async e=>{if(c)return h.abort(),new Response(null,{status:e.status,statusText:e.statusText,headers:new Headers(e.headers)});if(!e.ok||!r)return e;let i=parseInt(e.headers.get("Content-Length")??0);if(i===0)return e;let m=[],T=0,C=e.body.getReader();for(;;){let{done:L,value:M}=await C.read();if(L)break;m.push(M),T+=M.length,await r(T,i,window.structuredClone?window.structuredClone(m):m)}let I=e.headers.get("Content-Type")??"application/octet-stream";return new Response(new Blob(m,{type:I}),{status:e.status,statusText:e.statusText,headers:new Headers(e.headers)})});if(p===0||c)return S();if(a.method!=="GET")return console.warn("Only method GET can be cached"),S();let u=F(N);return u.has(g).then(e=>e?Promise.resolve(e):u.del(g).then(S).then(i=>u.set(g,i,y,p)))};if(n===0||l===0)return w();let E=async()=>{try{return await w()}catch(S){if(S.name===D)throw S;if(l*=2,f++,f>n)throw new Error(`Max retries reached: ${S}`);return console.warn(`Retrying fetch (${f}/${n}): ${g.toString()}`),await new Promise(u=>window.setTimeout(u,l)),E()}};return E()},v=g=>{if(g.status!==200)return Promise.resolve(g);let w=document.querySelector("a[download]");w&&document.body.removeChild(w);let E=g.headers.get("Content-Disposition")?.match(/filename="(.+)"/)?.[1];return g.clone().blob().then(S=>{let u=document.createElement("a"),e=window.URL.createObjectURL(S);return u.href=e,u.download=E||`${t}.${d||(S.type.split("/")?.[1]??"bin")}`,document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(e),g})};return{send(g=null){return t&&Object.keys($).forEach(w=>a.headers.delete(w)),b(new URL(s,document.body.getAttribute("data-url"))).then(w=>t&&w.ok?v(w).then(E=>({code:E.status,data:E,error:null})):w.json().then(E=>{if(E.error){let S=E.error.at(0),u=w.status>=500;throw new Error(u?`ID: ${E.id}
\u{1F7E5} ${S}`:`\u{1F7E8} ${S}`)}return g&&(E.data=g(E.data)),Object.assign(E,{code:w.status})})).catch(w=>{if(w.name===D)return console.warn("Fetch aborted:",w),w;throw w.name===ee&&(w=new Error("\u{1F7E5} Network error or rate limit exceeded")),alert(w.message??String(w)),w})},withCache(g=1e3*60*60*6){return p=g,this},withForceCache(g=1e3*60*60*6){return y=!0,p===0&&(p=g),this},withNoBody(){return c=!0,this},withRetry(g=3,w=1e3){return n=g,l=w,this},withCancel(g){return g==null?this:((async()=>(await g,h.abort()))(),this)},withDownload(g,w=null){return t=g,d=w,this},withProgressFunc(g=null){return r=g,this},default(g=null){return a.headers=new Headers(g??{}),b(s).then(w=>t?v(w):Promise.resolve(w))},token(g){return g.split(".").length===3?(a.headers.append("Authorization","Bearer "+g),this):(a.headers.append("x-access-key",g),this)},body(g){if(a.method==="GET")throw new Error("GET method does not support body");return a.body=JSON.stringify(g),this}}};var j=(()=>{let o=null,s=()=>o.get("token"),h=d=>o.set("token",d),a=d=>P(U,"/api/session").body(d).send(q.tokenResponse).then(t=>(t.code===200&&h(t.data.token),t.code===200)),p=()=>o.unset("token"),n=()=>String(s()??".").split(".").length===3,l=d=>P("GET","/api/v2/config").withCache(1e3*60*30).withForceCache().token(d).send().then(t=>{if(t.code!==200)throw new Error("failed to get config.");let r=k("config");for(let[b,v]of Object.entries(t.data))r.set(b,v);return h(d),t}),f=()=>{if(!n())return null;try{return JSON.parse(x.base64Decode(s().split(".")[1]))}catch{return null}};return{init:()=>{o=k("session")},guest:l,isValid:()=>n()?(f()?.exp??0)>Date.now()/1e3:!1,login:a,logout:p,decode:f,isAdmin:n,setToken:h,getToken:s}})();var H=(()=>{let o={"#000000":"#ffffff","#ffffff":"#000000","#212529":"#f8f9fa","#f8f9fa":"#212529"},s=["#ffffff","#f8f9fa"],h=["#000000","#212529"],a=!1,p=null,n=null,l=()=>p.set("active","light"),f=()=>p.set("active","dark"),c=w=>{let E=n.getAttribute("content");n.setAttribute("content",w.some(S=>S===E)?o[E]:E)},y=()=>{l(),document.documentElement.setAttribute("data-bs-theme","light"),c(h)},d=()=>{f(),document.documentElement.setAttribute("data-bs-theme","dark"),c(s)},t=(w=null,E=null)=>{let S=p.get("active")==="dark";return w&&E?S?w:E:S};return{init:()=>{switch(p=k("theme"),n=document.querySelector('meta[name="theme-color"]'),p.has("active")||(window.matchMedia("(prefers-color-scheme: dark)").matches?f():l()),document.documentElement.getAttribute("data-bs-theme")){case"dark":f();break;case"light":l();break;default:a=!0}t()?d():y()},spyTop:()=>{let w=S=>S.filter(u=>u.isIntersecting).forEach(u=>{let e=u.target.classList.contains("bg-white-black")?t(h[0],s[0]):t(h[1],s[1]);n.setAttribute("content",e)}),E=new IntersectionObserver(w,{rootMargin:"0% 0% -95% 0%"});document.querySelectorAll("section").forEach(S=>E.observe(S))},change:()=>t()?y():d(),isDarkMode:t,isAutoMode:()=>a}})();var G={tab:h=>window.bootstrap.Tab.getOrCreateInstance(document.getElementById(h)),modal:h=>window.bootstrap.Modal.getOrCreateInstance(document.getElementById(h))};var z=()=>window.confetti.shapeFromPath({path:"M256 472c-6-4-120-79-177-145C49 292 32 259 32 220 32 154 84 104 150 104c39 0 75 18 98 48 23-30 59-48 98-48 66 0 118 50 118 116 0 39-17 72-47 107-57 66-171 141-177 145-3 2-6 2-9 0z",matrix:[.06,0,0,.06,-15,-15]}),V=()=>{window.confetti&&window.confetti({origin:{y:1},zIndex:1057})},W=(o=3e4)=>{if(!window.confetti)return;let s=8,h=3,a=o*1e3,p=performance.now()+a,n=1e3/Math.max(1,s),l=z(),f=["#FFC0CB","#FF1493","#e70e0eff"],c=(t,r)=>Math.random()*(r-t)+t,y=0;function d(t){if(!(t>=p)){if(t-y>=n){y=t;let r=p-t,b=f[Math.random()*f.length|0];for(let v=0;v<h;v++)window.confetti({particleCount:1,startVelocity:0,ticks:Math.max(50,75*(r/a)),origin:{x:Math.random(),y:Math.abs(Math.random()-r/a)},zIndex:1057,colors:[b],shapes:[l],drift:c(-.5,.5),gravity:c(.5,1),scalar:c(.5,1)})}requestAnimationFrame(d)}}requestAnimationFrame(d)},J=(o,s=50)=>{if(!window.confetti)return;let h=Date.now()+s,a=o.getBoundingClientRect(),p=Math.max(.3,Math.min(1,a.top/window.innerHeight+.2)),n=z(),l=["#FF69B4","#FF1493"],f=()=>{l.forEach(c=>{window.confetti({particleCount:2,angle:60,spread:55,shapes:[n],origin:{x:a.left/window.innerWidth,y:p},zIndex:1057,colors:[c]}),window.confetti({particleCount:2,angle:120,spread:55,shapes:[n],origin:{x:a.right/window.innerWidth,y:p},zIndex:1057,colors:[c]})}),Date.now()<h&&requestAnimationFrame(f)};requestAnimationFrame(f)};var R=o=>{let s=new Map,h=new Map,a=F(o),p=1e3*60*60*6,n=!1,l=(r,b)=>{if(!b.ok)throw new Error(b.statusText);return a.set(r,b,n,p)},f=r=>a.has(r),c=r=>a.del(r),y=(r,b=null)=>{if(s.has(r))return Promise.resolve(s.get(r));if(h.has(r))return h.get(r);let v=()=>P("GET",r).withCancel(b).withRetry().default(),g=f(r).then(w=>w?Promise.resolve(w):c(r).then(v).then(E=>l(r,E))).then(w=>w.blob()).then(w=>s.set(r,URL.createObjectURL(w))).then(()=>s.get(r)).finally(()=>h.delete(r));return h.set(r,g),g};return{run:(r,b=null)=>{let v=new Map;return r.length===0?Promise.resolve():(r.filter(g=>g!==null).forEach(g=>{let w=v.get(g.url)??[];v.set(g.url,[...w,[g.res,g?.rej]])}),Promise.allSettled(Array.from(v).map(([g,w])=>y(g,b).then(E=>(w.forEach(S=>S[0]?.(E)),E)).catch(E=>(w.forEach(S=>S[1]?.(E)),E)))))},del:c,has:f,set:l,get:y,open,download:async(r,b)=>{if(!new Map(Array.from(s.entries()).map(([g,w])=>[w,g])).has(r))try{if(!new URL(r).protocol.includes("blob"))throw new Error("Is not blob")}catch{r=await y(r)}return P("GET",r).withDownload(b).default()},setTtl(r){return p=Number(r),this},withForceCache(){return n=!0,this}}};var ne=o=>{let s="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css",h="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js",a=()=>o.get(s).then(n=>new Promise((l,f)=>{let c=document.createElement("link");c.onload=l,c.onerror=f,c.rel="stylesheet",c.href=n,document.head.appendChild(c)})),p=()=>o.get(h).then(n=>new Promise((l,f)=>{let c=document.createElement("script");c.onload=l,c.onerror=f,c.src=n,document.head.appendChild(c)}));return Promise.all([a(),p()]).then(()=>{if(typeof window.AOS>"u")throw new Error("AOS library failed to load");window.AOS.init()})},oe=o=>o.get("https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.js").then(h=>new Promise((a,p)=>{let n=document.createElement("script");n.onerror=p,n.onload=()=>{typeof window.confetti>"u"?p(new Error("Confetti library failed to load")):a()},n.src=h,document.head.appendChild(n)})),re=o=>{let s=[{css:"https://fonts.googleapis.com/css2?family=Sacramento&display=swap",family:"Sacramento"},{css:"https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic&display=swap",family:"Noto Naskh Arabic"}],h=({css:a,family:p})=>o.get(a).then(n=>new Promise((l,f)=>{let c=document.createElement("link");c.onload=l,c.onerror=f,c.rel="stylesheet",c.href=n,document.head.appendChild(c)})).then(()=>document.fonts.load(`1em "${p}"`));return Promise.all(s.map(h))},K=(o={})=>{let s=[],h=R("libs").withForceCache();return(o?.aos??!0)&&s.push(ne(h)),(o?.confetti??!0)&&s.push(oe(h)),(o?.additionalFont??!0)&&s.push(re(h)),Promise.all(s)};var A=(()=>{let o=null,s=null,h=0,a=0,p=!0,n=null;return{init:()=>{o=document.getElementById("progress-info"),s=document.getElementById("progress-bar"),o.classList.remove("d-none")},add:()=>{h+=1},invalid:t=>{p&&(p=!1,s.style.backgroundColor="red",o.innerText=`Error loading ${t}`,document.dispatchEvent(new Event("undangan.progress.invalid")))},complete:(t,r=!1)=>{p&&(a+=1,o.innerText="Loading Thi\u1EC7p m\u1EDDi...",s.style.width=Math.min(a/h*100,100).toString()+"%",a===h&&(p=!1,n=null,document.dispatchEvent(new Event("undangan.progress.done"))))},getAbort:()=>n}})();var Q=(()=>{let o='<i class="fa-solid fa-circle-pause spin-button"></i>',s='<i class="fa-solid fa-circle-play"></i>',h=async(n=!0)=>{let l=document.body.getAttribute("data-audio");if(!l){A.complete("audio",!0);return}let f=null;try{f=new Audio(await R("audio").withForceCache().get(l,A.getAbort())),f.loop=!0,f.muted=!1,f.autoplay=!1,f.controls=!1,A.complete("audio")}catch{A.invalid("audio");return}let c=!1,y=document.getElementById("button-music"),d=async()=>{if(!(!navigator.onLine||!y)){y.disabled=!0;try{await f.play(),c=!0,y.disabled=!1,y.innerHTML=o}catch(r){c=!1,x.notify(r).error()}}},t=()=>{c=!1,f.pause(),y.innerHTML=s};document.addEventListener("undangan.open",()=>{y.classList.remove("d-none"),n&&d()}),y.addEventListener("offline",t),y.addEventListener("click",()=>c?t():d())},a=()=>{let n=document.getElementById("button-scroll-top");n&&n.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})};return{init:()=>(a(),{load:h})}})();var X=(()=>{let o=null,s=null,h=[],a=t=>new Promise((r,b)=>{let v=new Image;v.onload=()=>r(v),v.onerror=b,v.src=t}),p=(t,r)=>a(r).then(b=>{t.width=b.naturalWidth,t.height=b.naturalHeight,t.classList.remove("opacity-0"),t.src=b.src,b.remove(),A.complete("image")}),n=t=>{h.push({url:t.getAttribute("data-src"),res:r=>p(t,r),rej:r=>{console.error(r),A.invalid("image")}})},l=t=>{t.onerror=()=>A.invalid("image"),t.onload=()=>{t.width=t.naturalWidth,t.height=t.naturalHeight,A.complete("image")},t.complete&&t.naturalWidth!==0&&t.naturalHeight!==0?A.complete("image"):t.complete&&A.invalid("image")},f=()=>Array.from(o).some(t=>t.hasAttribute("data-src")),c=async()=>{let t=Array.from(o),r=async b=>{h.length=0,t.filter(b).forEach(v=>v.hasAttribute("data-src")?n(v):l(v)),await s.run(h,A.getAbort())};await r(b=>b.hasAttribute("fetchpriority")),await r(b=>!b.hasAttribute("fetchpriority"))},y=t=>{s.download(t,`${window.location.hostname}_image_${Date.now()}`)};return{init:()=>(s=R("image").withForceCache(),o=document.querySelectorAll("img"),{load:c,download:y,hasDataSrc:f})}})();var Z=(()=>{let o=null,s=()=>{let a=document.getElementById("video-love-stroy");if(!a||!a.hasAttribute("data-src"))return a?.remove(),A.complete("video",!0),Promise.resolve();let p=a.getAttribute("data-src");if(!p)return A.complete("video",!0),Promise.resolve();let n=document.createElement("video");n.className=a.getAttribute("data-vid-class"),n.loop=!0,n.muted=!0,n.controls=!1,n.autoplay=!1,n.playsInline=!0,n.preload="metadata";let l=new IntersectionObserver(y=>y.forEach(d=>d.isIntersecting?n.play():n.pause())),f=y=>{n.preload="auto",n.controls=!0,n.disableRemotePlayback=!0,n.disablePictureInPicture=!0,n.controlsList="noremoteplayback nodownload noplaybackrate",n.src=URL.createObjectURL(y)},c=()=>{let y=document.getElementById("progress-bar-video-love-stroy"),d=document.getElementById("progress-info-video-love-stroy");return P("GET",p).withNoBody().default({Range:"bytes=0-1"}).then(t=>{if(t.status===200)return n.preload="none",n.src=x.escapeHtml(p),a.appendChild(n),Promise.resolve();if(t.status!==206)throw new Error("failed to fetch video");n.addEventListener("error",()=>A.invalid("video"));let r=new Promise(b=>n.addEventListener("loadedmetadata",b,{once:!0}));return n.src=x.escapeHtml(p),a.appendChild(n),r}).then(()=>{n.pause(),n.currentTime=0,A.complete("video");let t=n.getBoundingClientRect().width*(n.videoHeight/n.videoWidth);return n.style.height=`${t}px`,a.style.height=`${t}px`,P("GET",p).withRetry().withProgressFunc((r,b)=>{let v=Number(r/b*100).toFixed(0)+"%";y.style.width=v,d.innerText=v}).default()}).then(t=>t.clone().blob().then(r=>{let b=new Promise(v=>n.addEventListener("loadedmetadata",v,{once:!0}));return f(r),n.load(),b.then(()=>t)})).catch(t=>{y.style.backgroundColor="red",d.innerText="Error loading video",console.error(t)})};return o.has(p).then(y=>y?y.blob().then(d=>{let t=new Promise(r=>n.addEventListener("loadedmetadata",r,{once:!0}));return f(d),a.appendChild(n),t.then(()=>A.complete("video"))}):o.del(p).then(c).then(d=>o.set(p,d))).then(()=>{l.observe(n),n.style.removeProperty("height"),a.style.removeProperty("height"),document.getElementById("video-love-stroy-loading")?.remove()})};return{init:()=>(o=R("video").withForceCache(),{load:s})}})();var Y=(()=>{let o=null,s=null,h=()=>{let u=new Date(document.body.getAttribute("data-time").replace(" ","T")).getTime(),e=L=>L<10?`0${L}`:`${L}`,i=document.getElementById("day"),m=document.getElementById("hour"),T=document.getElementById("minute"),C=document.getElementById("second"),I=()=>{let L=Math.abs(u-Date.now());i.textContent=e(Math.floor(L/(1e3*60*60*24))),m.textContent=e(Math.floor(L%(1e3*60*60*24)/(1e3*60*60))),T.textContent=e(Math.floor(L%(1e3*60*60)/(1e3*60))),C.textContent=e(Math.floor(L%(1e3*60)/1e3)),x.timeOut(I,1e3-Date.now()%1e3)};x.timeOut(I)},a=()=>{let u=window.location.search.split("to="),e=null;if(u.length>1&&u[1].length>=1&&(e=window.decodeURIComponent(u[1])),e){let i=document.getElementById("guest-name"),m=document.createElement("div");m.classList.add("m-2");let T=`<small class="mt-0 mb-1 mx-0 p-0">${x.escapeHtml(i?.getAttribute("data-message"))}</small><p class="m-0 p-0" style="font-size: 1.25rem">${x.escapeHtml(e)}</p>`;x.safeInnerHTML(m,T),i?.appendChild(m)}},p=async()=>{let e=document.querySelectorAll(".slide-desktop");if(!e||e.length===0)return;let i=document.getElementById("root")?.querySelector(".d-sm-block");if(!i||(i.dispatchEvent(new Event("undangan.slide.stop")),window.getComputedStyle(i).display==="none"))return;if(e.length===1){await x.changeOpacity(e[0],!0);return}let m=0;for(let[L,M]of e.entries())if(L===m){M.classList.add("slide-desktop-active"),await x.changeOpacity(M,!0);break}let T=!0,C=async()=>(await x.changeOpacity(e[m],!1),e[m].classList.remove("slide-desktop-active"),m=(m+1)%e.length,T&&(e[m].classList.add("slide-desktop-active"),await x.changeOpacity(e[m],!0)),T);i.addEventListener("undangan.slide.stop",()=>{T=!1});let I=async()=>{await C()&&x.timeOut(I,6e3)};x.timeOut(I,6e3)},n=u=>{u.disabled=!0,document.body.scrollIntoView({behavior:"instant"}),document.getElementById("root").classList.remove("opacity-0"),H.isAutoMode()&&document.getElementById("button-theme").classList.remove("d-none"),p(),H.spyTop(),V(),x.timeOut(W,1500),document.dispatchEvent(new Event("undangan.open")),x.changeOpacity(document.getElementById("welcome"),!1).then(e=>e.remove())},l=u=>{document.getElementById("button-modal-click").setAttribute("href",u.src),document.getElementById("button-modal-download").setAttribute("data-src",u.src);let e=document.getElementById("show-modal-image");e.src=u.src,e.width=u.width,e.height=u.height,G.modal("modal-image").show()},f=()=>{document.getElementById("show-modal-image").addEventListener("click",u=>{let e=u.currentTarget.parentNode.querySelector(".position-absolute");e.classList.contains("d-none")?e.classList.replace("d-none","d-flex"):e.classList.replace("d-flex","d-none")})},c=u=>{navigator.vibrate&&navigator.vibrate(500),J(u,100),x.changeOpacity(u,!1).then(e=>e.remove())},y=()=>o.set("info",!0),d=()=>{document.querySelectorAll(".font-arabic").forEach(u=>{u.innerHTML=String(u.innerHTML).normalize("NFC")})},t=()=>{document.querySelectorAll("svg").forEach(u=>{u.hasAttribute("data-class")&&x.timeOut(()=>u.classList.add(u.getAttribute("data-class")),parseInt(u.getAttribute("data-time")))})},r=()=>{let u=m=>new Date(m.replace(" ","T")+":00Z").toISOString().replace(/[-:]/g,"").split(".").shift(),e=new URL("https://calendar.google.com/calendar/render"),i=new URLSearchParams({action:"TEMPLATE",text:"L\u1EC5 c\u01B0\u1EDBi H\u1EEFu Chinh & Thanh Tr\xFAc",dates:`${u("2025-11-23 11:30")}/${u("2025-11-23 17:00")}`,details:"Ch\xFAng t\xF4i h\xE2n h\u1EA1nh m\u1EDDi Qu\xFD v\u1ECB \u0111\u1EBFn chung vui trong ng\xE0y tr\u1ECDng \u0111\u1EA1i c\u1EE7a ch\xFAng t\xF4i. S\u1EF1 c\xF3 m\u1EB7t v\xE0 l\u1EDDi ch\xFAc c\u1EE7a Qu\xFD v\u1ECB ch\xEDnh l\xE0 m\xF3n qu\xE0 \xFD ngh\u0129a nh\u1EA5t.",location:"5J8P+HC7, Th\u1EA1nh Tr\u1ECB, B\xECnh \u0110\u1EA1i, B\u1EBFn Tre",ctz:s.get("vn")});e.search=i.toString(),document.querySelector("#home button")?.addEventListener("click",()=>window.open(e,"_blank"))},b=()=>({load:e=>{K(e).then(()=>A.complete("libs")).catch(()=>A.invalid("libs"))}}),v=async()=>{t(),h(),a(),f(),d(),r(),o.has("presence")&&(document.getElementById("form-presence").value=o.get("presence")?"1":"2"),o.get("info")&&document.getElementById("information")?.remove(),await x.changeOpacity(document.getElementById("welcome"),!0),await x.changeOpacity(document.getElementById("loading"),!1).then(u=>u.remove())},g=()=>{A.init(),s=k("config"),o=k("information");let u=Z.init(),e=X.init(),i=Q.init(),m=b();v(),window.addEventListener("resize",x.debounce(p)),document.addEventListener("hide.bs.modal",()=>document.activeElement?.blur()),document.getElementById("button-modal-download").addEventListener("click",T=>{e.download(T.currentTarget.getAttribute("data-src"))}),u.load(),e.load(),i.load(),m.load({confetti:document.body.getAttribute("data-confetti")==="true"}),document.dispatchEvent(new Event("undangan.progress.done")),document.dispatchEvent(new Event("undangan.session"))},w=async()=>{let e=window.location.search.replace("?","").split("&").find(C=>C.startsWith("g="))?.split("=")[1]||"1",T=(await(await fetch("./assets/guests/data.json")).json()).find(C=>C.id===e);T&&(document.getElementById("form-name").value=T.name,document.getElementById("guest-name").innerHTML=T.name)},E=u=>{let e=document.getElementById("form-name");if(e.value.length===0){x.notify("Vui l\xF2ng \u0111i\u1EC1n t\xEAn!").warning(),e.focus();return}let i=document.getElementById("form-presence");if(i&&i.value==="0"){x.notify("Vui l\xF2ng ch\u1ECDn tr\u1EA1ng th\xE1i tham d\u1EF1.").warning();return}let m=document.getElementById("form-comment");if(m&&!m.value){x.notify("Vui l\xF2ng nh\u1EADp l\u1EDDi ch\xFAc c\u1EE7a b\u1EA1n.").warning();return}x.notify("C\u1EA3m \u01A1n b\u1EA1n \u0111\xE3 g\u1EEDi l\u1EDDi ch\xFAc.").info(),u.disabled=!0};return{init:()=>(H.init(),j.init(),window.addEventListener("load",()=>{_.init(g,["image","video","audio","libs"])}),w(),{sendComment:E,util:x,theme:H,guest:{open:n,modal:l,showStory:c,closeInformation:y}})}})();(o=>{o.undangan=Y.init()})(window);})();
