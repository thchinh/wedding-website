(()=>{var A=(()=>{let o='<span class="spinner-border spinner-border-sm my-0 ms-0 me-1 p-0" style="height: 0.8rem; width: 0.8rem;"></span>',r=[["*",'<strong class="text-theme-auto">$1</strong>'],["_",'<em class="text-theme-auto">$1</em>'],["~",'<del class="text-theme-auto">$1</del>'],["```",'<code class="font-monospace text-theme-auto">$1</code>']],d=[{type:"Mobile",regex:/Android.*Mobile|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i},{type:"Tablet",regex:/iPad|Android(?!.*Mobile)|Tablet/i},{type:"Desktop",regex:/Windows NT|Macintosh|Linux/i}],g=[{name:"Chrome",regex:/Chrome|CriOS/i},{name:"Safari",regex:/Safari/i},{name:"Edge",regex:/Edg|Edge/i},{name:"Firefox",regex:/Firefox|FxiOS/i},{name:"Opera",regex:/Opera|OPR/i},{name:"Internet Explorer",regex:/MSIE|Trident/i},{name:"Samsung Browser",regex:/SamsungBrowser/i}],f=[{name:"Windows",regex:/Windows NT ([\d.]+)/i},{name:"MacOS",regex:/Mac OS X ([\d_.]+)/i},{name:"Android",regex:/Android ([\d.]+)/i},{name:"iOS",regex:/OS ([\d_]+) like Mac OS X/i},{name:"Linux",regex:/Linux/i},{name:"Ubuntu",regex:/Ubuntu/i},{name:"Chrome OS",regex:/CrOS/i}],u=t=>String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),l=t=>{let w=b=>{window.alert(`${b} ${t}`)};return{success:()=>w("\u{1F7E9}"),error:()=>w("\u{1F7E5}"),warning:()=>w("\u{1F7E8}"),info:()=>w("\u{1F7E6}"),custom:b=>w(b)}},h=t=>window.confirm(`\u{1F7E6} ${t}`),i=(t,w)=>(t.replaceChildren(document.createRange().createContextualFragment(w)),t),x=(t,w,b=.05)=>new Promise(n=>{let s=parseFloat(t.style.opacity),S=w?1:0,T=()=>{s+=w?b:-b,s=Math.max(0,Math.min(1,s)),t.style.opacity=s.toFixed(2),w&&s>=S||!w&&s<=S?(t.style.opacity=S.toString(),n(t)):requestAnimationFrame(T)};requestAnimationFrame(T)}),p=(t,w=0)=>{let b=null;b=setTimeout(()=>{t(),clearTimeout(b),b=null},w)};return{loader:o,ask:h,copy:async(t,w=null,b=1500)=>{let n=t.getAttribute("data-copy");if(!n||n.length===0){l("Nothing to copy").warning();return}t.disabled=!0;try{await navigator.clipboard.writeText(n)}catch{t.disabled=!1,l("Failed to copy").error();return}let s=t.innerHTML;i(t,w||'<i class="fa-solid fa-check"></i>'),p(()=>{t.disabled=!1,t.innerHTML=s},b)},notify:l,timeOut:p,debounce:(t,w=100)=>{let b=null;return(...n)=>{clearTimeout(b),b=setTimeout(()=>t(...n),w)}},escapeHtml:u,base64Encode:t=>{let b=new TextEncoder().encode(t);return window.btoa(String.fromCharCode(...b))},base64Decode:t=>{let w=new TextDecoder,b=Uint8Array.from(window.atob(t),n=>n.charCodeAt(0));return w.decode(b)},disableButton:(t,w="Loading",b=!1)=>{t.disabled=!0;let n=t.innerHTML;return i(t,b?w:o+w),{restore:(s=!1)=>{t.innerHTML=n,t.disabled=s}}},disableCheckbox:t=>{t.disabled=!0;let w=document.querySelector(`label[for="${t.id}"]`),b=w.innerHTML;return i(w,o+b),{restore:()=>{w.innerHTML=b,t.disabled=!1}}},safeInnerHTML:i,parseUserAgent:t=>{if(!t||typeof t!="string")return"Unknown";let w=d.find(T=>T.regex.test(t))?.type??"Unknown",b=g.find(T=>T.regex.test(t))?.name??"Unknown",n=f.find(T=>T.regex.test(t)),s=n?n.name:"Unknown",S=n?t.match(n.regex)?.[1]?.replace(/_/g,".")??null:null;return`${b} ${w} ${S?`${s} ${S}`:s}`},changeOpacity:x,getGMTOffset:t=>{let w=new Date,b=new Intl.DateTimeFormat("en-US",{timeZone:t,hourCycle:"h23",hour:"numeric"}),n=(parseInt(b.format(w))-w.getUTCHours()+24)%24;return n>12&&(n-=24),`GMT${n>=0?"+":""}${n}`},convertMarkdownToHTML:t=>(r.forEach(([w,b])=>{t=t.replace(new RegExp(`\\${w}(\\S(?:[\\s\\S]*?\\S)?)\\${w}`,"g"),b)}),t)}})();var P=o=>{let r=(l=null)=>{let h=JSON.parse(localStorage.getItem(o));return l?h[String(l)]:h},d=(l,h)=>{let i=r();i[String(l)]=h,localStorage.setItem(o,JSON.stringify(i))},g=l=>Object.keys(r()).includes(String(l)),f=l=>{if(!g(l))return;let h=r();delete h[String(l)],localStorage.setItem(o,JSON.stringify(h))},u=()=>localStorage.setItem(o,"{}");return localStorage.getItem(o)||u(),{set:d,get:r,has:g,clear:u,unset:f}};var z=(()=>{let o=({uuid:p,own:e,name:a,presence:E,comment:C,created_at:m,is_admin:c,is_parent:y,gif_url:v,ip:I,user_agent:t,comments:w,like_count:b})=>({uuid:p,own:e,name:a,presence:E,comment:C,created_at:m,is_admin:c??!1,is_parent:y,gif_url:v,ip:I,user_agent:t,comments:w?.map(o)??[],like_count:b??0}),r=p=>p.map(o);return{uuidResponse:({uuid:p})=>({uuid:p}),tokenResponse:({token:p})=>({token:p}),statusResponse:({status:p})=>({status:p}),getCommentResponse:o,getCommentsResponse:r,getCommentsResponseV2:p=>({count:p.count,lists:r(p.lists)}),commentShowMore:(p,e=!1)=>({uuid:p,show:e}),postCommentRequest:(p,e,a,E,C)=>({id:p,name:e,presence:a,comment:E,gif_id:C}),postSessionRequest:(p,e)=>({email:p,password:e}),updateCommentRequest:(p,e,a)=>({presence:p,comment:e,gif_id:a})}})();var V="POST";var G="AbortError",ue="TypeError",W={Accept:"application/json","Content-Type":"application/json"},J="request",N=(()=>{let o=null;return{getInstance:r=>{if(!o||!o.has(r))throw new Error(`please init cache first: ${r}`);return o.get(r)},restart:async r=>{o.set(r,null),o.delete(r),await window.caches.delete(r),await window.caches.open(r).then(d=>o.set(r,d))},init:(r,d=[])=>{if(!window.isSecureContext)throw new Error("this application required secure context");o=new Map,Promise.all(d.concat([J]).map(g=>window.caches.open(g).then(f=>o.set(g,f)))).then(()=>r())}}})(),U=o=>{let r=N.getInstance(o);return{set:(u,l,h,i)=>l.clone().arrayBuffer().then(x=>{if(!l.ok)return l;let p=new Date,e=new Headers(l.headers);if(e.has("Date")||e.set("Date",p.toUTCString()),h||!e.has("Cache-Control")){if(!h&&e.has("Expires")){let a=new Date(e.get("Expires"));i=Math.max(0,a.getTime()-p.getTime())}if(i===0)throw new Error("Cache max age cannot be 0");e.set("Cache-Control",`public, max-age=${Math.floor(i/1e3)}`)}return e.has("Content-Length")||e.set("Content-Length",String(x.byteLength)),r.put(u,new Response(x,{headers:e})).then(()=>l)}),has:u=>r.match(u).then(l=>{if(!l)return null;let h=l.headers.get("Cache-Control").match(/max-age=(\d+)/)[1],i=Date.parse(l.headers.get("Date"))+parseInt(h)*1e3;return Date.now()>i?null:l}),del:u=>r.delete(u)}},D=(o,r)=>{let d=new AbortController,g={signal:d.signal,credential:"include",headers:new Headers(W),method:String(o).toUpperCase()},f=0,u=0,l=0,h=0,i=!1,x=!1,p=null,e=null,a=null,E=m=>{let c=()=>{let v=()=>window.fetch(m,g).then(async t=>{if(i)return d.abort(),new Response(null,{status:t.status,statusText:t.statusText,headers:new Headers(t.headers)});if(!t.ok||!a)return t;let w=parseInt(t.headers.get("Content-Length")??0);if(w===0)return t;let b=[],n=0,s=t.body.getReader();for(;;){let{done:T,value:L}=await s.read();if(T)break;b.push(L),n+=L.length,await a(n,w,window.structuredClone?window.structuredClone(b):b)}let S=t.headers.get("Content-Type")??"application/octet-stream";return new Response(new Blob(b,{type:S}),{status:t.status,statusText:t.statusText,headers:new Headers(t.headers)})});if(f===0||i)return v();if(g.method!=="GET")return console.warn("Only method GET can be cached"),v();let I=U(J);return I.has(m).then(t=>t?Promise.resolve(t):I.del(m).then(v).then(w=>I.set(m,w,x,f)))};if(u===0||l===0)return c();let y=async()=>{try{return await c()}catch(v){if(v.name===G)throw v;if(l*=2,h++,h>u)throw new Error(`Max retries reached: ${v}`);return console.warn(`Retrying fetch (${h}/${u}): ${m.toString()}`),await new Promise(I=>window.setTimeout(I,l)),y()}};return y()},C=m=>{if(m.status!==200)return Promise.resolve(m);let c=document.querySelector("a[download]");c&&document.body.removeChild(c);let y=m.headers.get("Content-Disposition")?.match(/filename="(.+)"/)?.[1];return m.clone().blob().then(v=>{let I=document.createElement("a"),t=window.URL.createObjectURL(v);return I.href=t,I.download=y||`${e}.${p||(v.type.split("/")?.[1]??"bin")}`,document.body.appendChild(I),I.click(),document.body.removeChild(I),window.URL.revokeObjectURL(t),m})};return{send(m=null){return e&&Object.keys(W).forEach(c=>g.headers.delete(c)),E(new URL(r,document.body.getAttribute("data-url"))).then(c=>e&&c.ok?C(c).then(y=>({code:y.status,data:y,error:null})):c.json().then(y=>{if(y.error){let v=y.error.at(0),I=c.status>=500;throw new Error(I?`ID: ${y.id}
\u{1F7E5} ${v}`:`\u{1F7E8} ${v}`)}return m&&(y.data=m(y.data)),Object.assign(y,{code:c.status})})).catch(c=>{if(c.name===G)return console.warn("Fetch aborted:",c),c;throw c.name===ue&&(c=new Error("\u{1F7E5} Network error or rate limit exceeded")),alert(c.message??String(c)),c})},withCache(m=1e3*60*60*6){return f=m,this},withForceCache(m=1e3*60*60*6){return x=!0,f===0&&(f=m),this},withNoBody(){return i=!0,this},withRetry(m=3,c=1e3){return u=m,l=c,this},withCancel(m){return m==null?this:((async()=>(await m,d.abort()))(),this)},withDownload(m,c=null){return e=m,p=c,this},withProgressFunc(m=null){return a=m,this},default(m=null){return g.headers=new Headers(m??{}),E(r).then(c=>e?C(c):Promise.resolve(c))},token(m){return m.split(".").length===3?(g.headers.append("Authorization","Bearer "+m),this):(g.headers.append("x-access-key",m),this)},body(m){if(g.method==="GET")throw new Error("GET method does not support body");return g.body=JSON.stringify(m),this}}};var K=(()=>{let o=null,r=()=>o.get("token"),d=p=>o.set("token",p),g=p=>D(V,"/api/session").body(p).send(z.tokenResponse).then(e=>(e.code===200&&d(e.data.token),e.code===200)),f=()=>o.unset("token"),u=()=>String(r()??".").split(".").length===3,l=p=>D("GET","/api/v2/config").withCache(1e3*60*30).withForceCache().token(p).send().then(e=>{if(e.code!==200)throw new Error("failed to get config.");let a=P("config");for(let[E,C]of Object.entries(e.data))a.set(E,C);return d(p),e}),h=()=>{if(!u())return null;try{return JSON.parse(A.base64Decode(r().split(".")[1]))}catch{return null}};return{init:()=>{o=P("session")},guest:l,isValid:()=>u()?(h()?.exp??0)>Date.now()/1e3:!1,login:g,logout:f,decode:h,isAdmin:u,setToken:d,getToken:r}})();var q=(()=>{let o={"#000000":"#ffffff","#ffffff":"#000000","#212529":"#f8f9fa","#f8f9fa":"#212529"},r=["#ffffff","#f8f9fa"],d=["#000000","#212529"],g=!1,f=null,u=null,l=()=>f.set("active","light"),h=()=>f.set("active","dark"),i=c=>{let y=u.getAttribute("content");u.setAttribute("content",c.some(v=>v===y)?o[y]:y)},x=()=>{l(),document.documentElement.setAttribute("data-bs-theme","light"),i(d)},p=()=>{h(),document.documentElement.setAttribute("data-bs-theme","dark"),i(r)},e=(c=null,y=null)=>{let v=f.get("active")==="dark";return c&&y?v?c:y:v};return{init:()=>{switch(f=P("theme"),u=document.querySelector('meta[name="theme-color"]'),f.has("active")||(window.matchMedia("(prefers-color-scheme: dark)").matches?h():l()),document.documentElement.getAttribute("data-bs-theme")){case"dark":h();break;case"light":l();break;default:g=!0}e()?p():x()},spyTop:()=>{let c=v=>v.filter(I=>I.isIntersecting).forEach(I=>{let t=I.target.classList.contains("bg-white-black")?e(d[0],r[0]):e(d[1],r[1]);u.setAttribute("content",t)}),y=new IntersectionObserver(c,{rootMargin:"0% 0% -95% 0%"});document.querySelectorAll("section").forEach(v=>y.observe(v))},change:()=>e()?x():p(),isDarkMode:e,isAutoMode:()=>g}})();var Q={tab:d=>window.bootstrap.Tab.getOrCreateInstance(document.getElementById(d)),modal:d=>window.bootstrap.Modal.getOrCreateInstance(document.getElementById(d))};var X=()=>window.confetti.shapeFromPath({path:"M256 472c-6-4-120-79-177-145C49 292 32 259 32 220 32 154 84 104 150 104c39 0 75 18 98 48 23-30 59-48 98-48 66 0 118 50 118 116 0 39-17 72-47 107-57 66-171 141-177 145-3 2-6 2-9 0z",matrix:[.06,0,0,.06,-15,-15]}),Y=()=>{window.confetti&&window.confetti({origin:{y:1},zIndex:1057})},Z=(o=3e4)=>{if(!window.confetti)return;let r=8,d=3,g=o*1e3,f=performance.now()+g,u=1e3/Math.max(1,r),l=X(),h=["#FFC0CB","#FF1493","#e70e0eff"],i=(e,a)=>Math.random()*(a-e)+e,x=0;function p(e){if(!(e>=f)){if(e-x>=u){x=e;let a=f-e,E=h[Math.random()*h.length|0];for(let C=0;C<d;C++)window.confetti({particleCount:1,startVelocity:0,ticks:Math.max(50,75*(a/g)),origin:{x:Math.random(),y:Math.abs(Math.random()-a/g)},zIndex:1057,colors:[E],shapes:[l],drift:i(-.5,.5),gravity:i(.5,1),scalar:i(.5,1)})}requestAnimationFrame(p)}}requestAnimationFrame(p)},ee=(o,r=50)=>{if(!window.confetti)return;let d=Date.now()+r,g=o.getBoundingClientRect(),f=Math.max(.3,Math.min(1,g.top/window.innerHeight+.2)),u=X(),l=["#FF69B4","#FF1493"],h=()=>{l.forEach(i=>{window.confetti({particleCount:2,angle:60,spread:55,shapes:[u],origin:{x:g.left/window.innerWidth,y:f},zIndex:1057,colors:[i]}),window.confetti({particleCount:2,angle:120,spread:55,shapes:[u],origin:{x:g.right/window.innerWidth,y:f},zIndex:1057,colors:[i]})}),Date.now()<d&&requestAnimationFrame(h)};requestAnimationFrame(h)};var H=o=>{let r=new Map,d=new Map,g=U(o),f=1e3*60*60*6,u=!1,l=(a,E)=>{if(!E.ok)throw new Error(E.statusText);return g.set(a,E,u,f)},h=a=>g.has(a),i=a=>g.del(a),x=(a,E=null)=>{if(r.has(a))return Promise.resolve(r.get(a));if(d.has(a))return d.get(a);let C=()=>D("GET",a).withCancel(E).withRetry().default(),m=h(a).then(c=>c?Promise.resolve(c):i(a).then(C).then(y=>l(a,y))).then(c=>c.blob()).then(c=>r.set(a,URL.createObjectURL(c))).then(()=>r.get(a)).finally(()=>d.delete(a));return d.set(a,m),m};return{run:(a,E=null)=>{let C=new Map;return a.length===0?Promise.resolve():(a.filter(m=>m!==null).forEach(m=>{let c=m.url,y=C.get(c)??[];window.location.origin.includes("thchinh.github.io")&&(c=c.replace("./","./wedding-website/"),y.url=c),C.set(c,[...y,[m.res,m?.rej]])}),Promise.allSettled(Array.from(C).map(([m,c])=>x(m,E).then(y=>(c.forEach(v=>v[0]?.(y)),y)).catch(y=>(c.forEach(v=>v[1]?.(y)),y)))))},del:i,has:h,set:l,get:x,open,download:async(a,E)=>{if(!new Map(Array.from(r.entries()).map(([m,c])=>[c,m])).has(a))try{if(!new URL(a).protocol.includes("blob"))throw new Error("Is not blob")}catch{a=await x(a)}return D("GET",a).withDownload(E).default()},setTtl(a){return f=Number(a),this},withForceCache(){return u=!0,this}}};var he=o=>{let r="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css",d="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js",g=()=>o.get(r).then(u=>new Promise((l,h)=>{let i=document.createElement("link");i.onload=l,i.onerror=h,i.rel="stylesheet",i.href=u,document.head.appendChild(i)})),f=()=>o.get(d).then(u=>new Promise((l,h)=>{let i=document.createElement("script");i.onload=l,i.onerror=h,i.src=u,document.head.appendChild(i)}));return Promise.all([g(),f()]).then(()=>{if(typeof window.AOS>"u")throw new Error("AOS library failed to load");window.AOS.init()})},ge=o=>o.get("https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.js").then(d=>new Promise((g,f)=>{let u=document.createElement("script");u.onerror=f,u.onload=()=>{typeof window.confetti>"u"?f(new Error("Confetti library failed to load")):g()},u.src=d,document.head.appendChild(u)})),pe=o=>{let r=[{css:"https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic&display=swap",family:"Noto Naskh Arabic"},{css:"https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap",family:"Dancing Script"}],d=({css:g,family:f})=>o.get(g).then(u=>new Promise((l,h)=>{let i=document.createElement("link");i.onload=l,i.onerror=h,i.rel="stylesheet",i.href=u,document.head.appendChild(i)})).then(()=>document.fonts.load(`1em "${f}"`));return Promise.all(r.map(d))},te=(o={})=>{let r=[],d=H("libs").withForceCache();return(o?.aos??!0)&&r.push(he(d)),(o?.confetti??!0)&&r.push(ge(d)),(o?.additionalFont??!0)&&r.push(pe(d)),Promise.all(r)};var M=(()=>{let o=null,r=null,d=0,g=0,f=!0,u=null;return{init:()=>{o=document.getElementById("progress-info"),r=document.getElementById("progress-bar"),o.classList.remove("d-none")},add:()=>{d+=1},invalid:e=>{f&&(f=!1,document.dispatchEvent(new Event("undangan.progress.invalid")))},complete:(e,a=!1)=>{f&&(g+=1,o.innerText="Loading Thi\u1EC7p m\u1EDDi...",r.style.width=Math.min(g/d*100,100).toString()+"%",g===d&&(f=!1,u=null,document.dispatchEvent(new Event("undangan.progress.done"))))},getAbort:()=>u}})();var ne=(()=>{let o='<i class="fa-solid fa-circle-pause spin-button"></i>',r='<i class="fa-solid fa-circle-play"></i>',d=async(u=!0)=>{let l=document.body.getAttribute("data-audio");if(!l){M.complete("audio",!0);return}let h=null;try{h=new Audio(await H("audio").withForceCache().get(l,M.getAbort())),h.loop=!0,h.muted=!1,h.autoplay=!1,h.controls=!1,M.complete("audio")}catch{M.invalid("audio");return}let i=!1,x=document.getElementById("button-music"),p=async()=>{if(!(!navigator.onLine||!x)){x.disabled=!0;try{await h.play(),i=!0,x.disabled=!1,x.innerHTML=o}catch(a){i=!1,A.notify(a).error()}}},e=()=>{i=!1,h.pause(),x.innerHTML=r};document.addEventListener("undangan.open",()=>{x.classList.remove("d-none"),u&&p()}),x.addEventListener("offline",e),x.addEventListener("click",()=>i?e():p())},g=()=>{let u=document.getElementById("button-scroll-top");u&&u.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})};return{init:()=>(g(),{load:d})}})();var oe=(()=>{let o=null,r=null,d=[],g=e=>new Promise((a,E)=>{let C=new Image;C.onload=()=>a(C),C.onerror=E,C.src=e}),f=(e,a)=>g(a).then(E=>{e.width=E.naturalWidth,e.height=E.naturalHeight,e.classList.remove("opacity-0"),e.src=E.src,E.remove(),M.complete("image")}),u=e=>{d.push({url:e.getAttribute("data-src"),res:a=>f(e,a),rej:a=>{console.error(a),M.invalid("image")}})},l=e=>{e.onerror=()=>M.invalid("image"),e.onload=()=>{e.width=e.naturalWidth,e.height=e.naturalHeight,M.complete("image")},e.complete&&e.naturalWidth!==0&&e.naturalHeight!==0?M.complete("image"):e.complete&&M.invalid("image")},h=()=>Array.from(o).some(e=>e.hasAttribute("data-src")),i=async()=>{let e=Array.from(o),a=async E=>{d.length=0,e.filter(E).forEach(C=>C.hasAttribute("data-src")?u(C):l(C)),await r.run(d,M.getAbort())};await a(E=>E.hasAttribute("fetchpriority")),await a(E=>!E.hasAttribute("fetchpriority"))},x=e=>{r.download(e,`${window.location.hostname}_image_${Date.now()}`)};return{init:()=>(r=H("image").withForceCache(),o=document.querySelectorAll("img"),{load:i,download:x,hasDataSrc:h})}})();var re="131020",F="261020",se=(()=>{let o=null,r=null,d=()=>{let s=window.location.search.replace("?","").split("&").find(T=>T.startsWith("m="))?.split("=")[1];return[F,re].includes(s)?s:F},g=()=>{let s=window.location.search.replace("?","").split("&").find(T=>T.startsWith("t="))?.split("=")[1],S=parseInt(s);return isNaN(S)||S<0||S>23?"18":S.toString().padStart(2,"0")},f=()=>{let n=d(),s=n===F?"2025-11-23 11:30":`2025-11-22 ${g()}:00`,S=n===F?"23-11-2025":"22-11-2025";document.body.setAttribute("data-time",s),document.querySelectorAll(".date-start").forEach(T=>{T.textContent=S}),n===re&&(document.getElementById("invite-time").textContent=`${g()}:00`)},u=()=>{let n=new Date(document.body.getAttribute("data-time").replace(" ","T")).getTime(),s=k=>k<10?`0${k}`:`${k}`,S=document.getElementById("day"),T=document.getElementById("hour"),L=document.getElementById("minute"),O=document.getElementById("second"),R=()=>{let k=Math.abs(n-Date.now());S.textContent=s(Math.floor(k/(1e3*60*60*24))),T.textContent=s(Math.floor(k%(1e3*60*60*24)/(1e3*60*60))),L.textContent=s(Math.floor(k%(1e3*60*60)/(1e3*60))),O.textContent=s(Math.floor(k%(1e3*60)/1e3)),A.timeOut(R,1e3-Date.now()%1e3)};A.timeOut(R)},l=()=>{let n=window.location.search.split("to="),s=null;if(n.length>1&&n[1].length>=1&&(s=window.decodeURIComponent(n[1])),s){let S=document.getElementById("guest-name"),T=document.createElement("div");T.classList.add("m-2");let L=`<small class="mt-0 mb-1 mx-0 p-0">${A.escapeHtml(S?.getAttribute("data-message"))}</small><p class="m-0 p-0" style="font-size: 1.25rem">${A.escapeHtml(s)}</p>`;A.safeInnerHTML(T,L),S?.appendChild(T)}},h=async()=>{let s=document.querySelectorAll(".slide-desktop");if(!s||s.length===0)return;let S=document.getElementById("root")?.querySelector(".d-sm-block");if(!S||(S.dispatchEvent(new Event("undangan.slide.stop")),window.getComputedStyle(S).display==="none"))return;if(s.length===1){await A.changeOpacity(s[0],!0);return}let T=0;for(let[k,$]of s.entries())if(k===T){$.classList.add("slide-desktop-active"),await A.changeOpacity($,!0);break}let L=!0,O=async()=>(await A.changeOpacity(s[T],!1),s[T].classList.remove("slide-desktop-active"),T=(T+1)%s.length,L&&(s[T].classList.add("slide-desktop-active"),await A.changeOpacity(s[T],!0)),L);S.addEventListener("undangan.slide.stop",()=>{L=!1});let R=async()=>{await O()&&A.timeOut(R,6e3)};A.timeOut(R,6e3)},i=async()=>{let s=window.location.search.replace("?","").split("&").find(O=>O.startsWith("g="))?.split("=")[1]||"1",L=(await(await fetch("./assets/guests/data.json")).json()).find(O=>O.code===s);console.log("guestName: ",L),L&&(document.getElementById("form-name").value=L.name,document.getElementById("guest-name").innerText=L.name)},x=()=>{let n=d();document.getElementById(n)?.classList.toggle("d-none");let s=document.getElementById(`time-${n}`);s&&s.classList.toggle("d-none")},p=n=>{n.disabled=!0,document.body.scrollIntoView({behavior:"instant"}),document.getElementById("root").classList.remove("opacity-0"),q.isAutoMode()&&document.getElementById("button-theme").classList.remove("d-none"),h(),q.spyTop(),Y(),A.timeOut(Z,1500),document.dispatchEvent(new Event("undangan.open")),A.changeOpacity(document.getElementById("welcome"),!1).then(s=>s.remove()),i(),x()},e=n=>{document.getElementById("button-modal-click").setAttribute("href",n.src),document.getElementById("button-modal-download").setAttribute("data-src",n.src);let s=document.getElementById("show-modal-image");s.src=n.src,s.width=n.width,s.height=n.height,Q.modal("modal-image").show()},a=()=>{document.getElementById("show-modal-image").addEventListener("click",n=>{let s=n.currentTarget.parentNode.querySelector(".position-absolute");s.classList.contains("d-none")?s.classList.replace("d-none","d-flex"):s.classList.replace("d-flex","d-none")})},E=n=>{navigator.vibrate&&navigator.vibrate(500),ee(n,100),A.changeOpacity(n,!1).then(s=>s.remove())},C=()=>o.set("info",!0),m=()=>{document.querySelectorAll(".font-arabic").forEach(n=>{n.innerHTML=String(n.innerHTML).normalize("NFC")})},c=()=>{document.querySelectorAll("svg").forEach(n=>{n.hasAttribute("data-class")&&A.timeOut(()=>n.classList.add(n.getAttribute("data-class")),parseInt(n.getAttribute("data-time")))})},y=()=>{let n=k=>new Date(k.replace(" ","T")+":00Z").toISOString().replace(/[-:]/g,"").split(".").shift(),s=document.body.getAttribute("data-time"),T=((k,$=5)=>{let B=new Date(k.replace(" ","T"));B.setHours(B.getHours()+$);let ae=B.getFullYear(),ie=String(B.getMonth()+1).padStart(2,"0"),ce=String(B.getDate()).padStart(2,"0"),de=String(B.getHours()).padStart(2,"0"),le=String(B.getMinutes()).padStart(2,"0");return`${ae}-${ie}-${ce} ${de}:${le}`})(s,5),L=d(),O=new URL("https://calendar.google.com/calendar/render"),R=new URLSearchParams({action:"TEMPLATE",text:"L\u1EC5 c\u01B0\u1EDBi H\u1EEFu Chinh & Thanh Tr\xFAc",dates:`${n(s)}/${n(T)}`,details:"Ch\xFAng t\xF4i h\xE2n h\u1EA1nh m\u1EDDi Qu\xFD v\u1ECB \u0111\u1EBFn chung vui trong ng\xE0y tr\u1ECDng \u0111\u1EA1i c\u1EE7a ch\xFAng t\xF4i. S\u1EF1 c\xF3 m\u1EB7t v\xE0 l\u1EDDi ch\xFAc c\u1EE7a Qu\xFD v\u1ECB ch\xEDnh l\xE0 m\xF3n qu\xE0 \xFD ngh\u0129a nh\u1EA5t.",location:L===F?"5J8P+HC7, Th\u1EA1nh Tr\u1ECB, B\xECnh \u0110\u1EA1i, B\u1EBFn Tre":"5PC2+9Q2 B\xECnh \u0110\u1EA1i, B\u1EBFn Tre",ctz:r.get("vn")});O.search=R.toString(),document.querySelector("#home button")?.addEventListener("click",()=>window.open(O,"_blank"))},v=()=>({load:s=>{te(s).then(()=>M.complete("libs")).catch(()=>M.invalid("libs"))}}),I=async()=>{f(),c(),u(),l(),a(),m(),y(),o.has("presence")&&(document.getElementById("form-presence").value=o.get("presence")?"1":"2"),o.get("info")&&document.getElementById("information")?.remove(),await A.changeOpacity(document.getElementById("welcome"),!0),await A.changeOpacity(document.getElementById("loading"),!1).then(n=>n.remove())},t=()=>{M.init(),r=P("config"),o=P("information");let n=oe.init(),s=ne.init(),S=v();I(),window.addEventListener("resize",A.debounce(h)),document.addEventListener("hide.bs.modal",()=>document.activeElement?.blur()),document.getElementById("button-modal-download").addEventListener("click",T=>{n.download(T.currentTarget.getAttribute("data-src"))}),n.load(),s.load(),S.load({confetti:document.body.getAttribute("data-confetti")==="true",additionalFont:!0}),document.dispatchEvent(new Event("undangan.session"))},w=n=>{let s=document.getElementById("form-name");if(s.value.length===0){A.notify("Vui l\xF2ng \u0111i\u1EC1n t\xEAn!").warning(),s.focus();return}let S=document.getElementById("form-presence");if(S&&S.value==="0"){A.notify("Vui l\xF2ng ch\u1ECDn tr\u1EA1ng th\xE1i tham d\u1EF1.").warning();return}let T=document.getElementById("form-comment");if(T&&!T.value){A.notify("Vui l\xF2ng nh\u1EADp l\u1EDDi ch\xFAc c\u1EE7a b\u1EA1n.").warning();return}A.notify("C\u1EA3m \u01A1n b\u1EA1n \u0111\xE3 g\u1EEDi l\u1EDDi ch\xFAc.").info(),n.disabled=!0};return{init:()=>(q.init(),K.init(),window.addEventListener("load",()=>{N.init(t,["image","audio","libs"])}),{sendComment:w,util:A,theme:q,guest:{open:p,modal:e,showStory:E,closeInformation:C}})}})();(o=>{o.undangan=se.init()})(window);})();
