(()=>{var C=(()=>{let o=null,r=null,m=0,a=0,u=!0,e=null,s=()=>{m+=1},h=()=>`(${a}/${m}) [${parseInt(a/m*100).toFixed(0)}%]`;return{init:()=>{o=document.getElementById("progress-info"),r=document.getElementById("progress-bar"),o.classList.remove("d-none"),e=new Promise(i=>document.addEventListener("undangan.progress.invalid",i))},add:s,invalid:i=>{u&&(u=!1,r.style.backgroundColor="red",o.innerText=`Error loading ${i} ${h()}`,document.dispatchEvent(new Event("undangan.progress.invalid")))},complete:(i,b=!1)=>{u&&(a+=1,o.innerText=`Loading ${i} ${b?"skipped":"complete"} ${h()}`,r.style.width=Math.min(a/m*100,100).toString()+"%",a===m&&(u=!1,e=null,document.dispatchEvent(new Event("undangan.progress.done"))))},getAbort:()=>e}})();var S=(()=>{let o='<span class="spinner-border spinner-border-sm my-0 ms-0 me-1 p-0" style="height: 0.8rem; width: 0.8rem;"></span>',r=[["*",'<strong class="text-theme-auto">$1</strong>'],["_",'<em class="text-theme-auto">$1</em>'],["~",'<del class="text-theme-auto">$1</del>'],["```",'<code class="font-monospace text-theme-auto">$1</code>']],m=[{type:"Mobile",regex:/Android.*Mobile|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i},{type:"Tablet",regex:/iPad|Android(?!.*Mobile)|Tablet/i},{type:"Desktop",regex:/Windows NT|Macintosh|Linux/i}],a=[{name:"Chrome",regex:/Chrome|CriOS/i},{name:"Safari",regex:/Safari/i},{name:"Edge",regex:/Edg|Edge/i},{name:"Firefox",regex:/Firefox|FxiOS/i},{name:"Opera",regex:/Opera|OPR/i},{name:"Internet Explorer",regex:/MSIE|Trident/i},{name:"Samsung Browser",regex:/SamsungBrowser/i}],u=[{name:"Windows",regex:/Windows NT ([\d.]+)/i},{name:"MacOS",regex:/Mac OS X ([\d_.]+)/i},{name:"Android",regex:/Android ([\d.]+)/i},{name:"iOS",regex:/OS ([\d_]+) like Mac OS X/i},{name:"Linux",regex:/Linux/i},{name:"Ubuntu",regex:/Ubuntu/i},{name:"Chrome OS",regex:/CrOS/i}],e=n=>String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),s=n=>{let f=y=>{window.alert(`${y} ${n}`)};return{success:()=>f("\u{1F7E9}"),error:()=>f("\u{1F7E5}"),warning:()=>f("\u{1F7E8}"),info:()=>f("\u{1F7E6}"),custom:y=>f(y)}},h=n=>window.confirm(`\u{1F7E6} ${n}`),c=(n,f)=>(n.replaceChildren(document.createRange().createContextualFragment(f)),n),E=(n,f,y=.05)=>new Promise(T=>{let A=parseFloat(n.style.opacity),L=f?1:0,I=()=>{A+=f?y:-y,A=Math.max(0,Math.min(1,A)),n.style.opacity=A.toFixed(2),f&&A>=L||!f&&A<=L?(n.style.opacity=L.toString(),T(n)):requestAnimationFrame(I)};requestAnimationFrame(I)}),p=(n,f=0)=>{let y=null;y=setTimeout(()=>{n(),clearTimeout(y),y=null},f)};return{loader:o,ask:h,copy:async(n,f=null,y=1500)=>{let T=n.getAttribute("data-copy");if(!T||T.length===0){s("Nothing to copy").warning();return}n.disabled=!0;try{await navigator.clipboard.writeText(T)}catch{n.disabled=!1,s("Failed to copy").error();return}let A=n.innerHTML;c(n,f||'<i class="fa-solid fa-check"></i>'),p(()=>{n.disabled=!1,n.innerHTML=A},y)},notify:s,timeOut:p,debounce:(n,f=100)=>{let y=null;return(...T)=>{clearTimeout(y),y=setTimeout(()=>n(...T),f)}},escapeHtml:e,base64Encode:n=>{let y=new TextEncoder().encode(n);return window.btoa(String.fromCharCode(...y))},base64Decode:n=>{let f=new TextDecoder,y=Uint8Array.from(window.atob(n),T=>T.charCodeAt(0));return f.decode(y)},disableButton:(n,f="Loading",y=!1)=>{n.disabled=!0;let T=n.innerHTML;return c(n,y?f:o+f),{restore:(A=!1)=>{n.innerHTML=T,n.disabled=A}}},disableCheckbox:n=>{n.disabled=!0;let f=document.querySelector(`label[for="${n.id}"]`),y=f.innerHTML;return c(f,o+y),{restore:()=>{f.innerHTML=y,n.disabled=!1}}},safeInnerHTML:c,parseUserAgent:n=>{if(!n||typeof n!="string")return"Unknown";let f=m.find(I=>I.regex.test(n))?.type??"Unknown",y=a.find(I=>I.regex.test(n))?.name??"Unknown",T=u.find(I=>I.regex.test(n)),A=T?T.name:"Unknown",L=T?n.match(T.regex)?.[1]?.replace(/_/g,".")??null:null;return`${y} ${f} ${L?`${A} ${L}`:A}`},changeOpacity:E,getGMTOffset:n=>{let f=new Date,y=new Intl.DateTimeFormat("en-US",{timeZone:n,hourCycle:"h23",hour:"numeric"}),T=(parseInt(y.format(f))-f.getUTCHours()+24)%24;return T>12&&(T-=24),`GMT${T>=0?"+":""}${T}`},convertMarkdownToHTML:n=>(r.forEach(([f,y])=>{n=n.replace(new RegExp(`\\${f}(\\S(?:[\\s\\S]*?\\S)?)\\${f}`,"g"),y)}),n)}})();var N="POST";var _="AbortError",ne="TypeError",q={Accept:"application/json","Content-Type":"application/json"},U="request",B=(()=>{let o=null;return{getInstance:r=>{if(!o||!o.has(r))throw new Error(`please init cache first: ${r}`);return o.get(r)},restart:async r=>{o.set(r,null),o.delete(r),await window.caches.delete(r),await window.caches.open(r).then(m=>o.set(r,m))},init:(r,m=[])=>{if(!window.isSecureContext)throw new Error("this application required secure context");o=new Map,Promise.all(m.concat([U]).map(a=>window.caches.open(a).then(u=>o.set(a,u)))).then(()=>r())}}})(),D=o=>{let r=B.getInstance(o);return{set:(e,s,h,c)=>s.clone().arrayBuffer().then(E=>{if(!s.ok)return s;let p=new Date,t=new Headers(s.headers);if(t.has("Date")||t.set("Date",p.toUTCString()),h||!t.has("Cache-Control")){if(!h&&t.has("Expires")){let i=new Date(t.get("Expires"));c=Math.max(0,i.getTime()-p.getTime())}if(c===0)throw new Error("Cache max age cannot be 0");t.set("Cache-Control",`public, max-age=${Math.floor(c/1e3)}`)}return t.has("Content-Length")||t.set("Content-Length",String(E.byteLength)),r.put(e,new Response(E,{headers:t})).then(()=>s)}),has:e=>r.match(e).then(s=>{if(!s)return null;let h=s.headers.get("Cache-Control").match(/max-age=(\d+)/)[1],c=Date.parse(s.headers.get("Date"))+parseInt(h)*1e3;return Date.now()>c?null:s}),del:e=>r.delete(e)}},P=(o,r)=>{let m=new AbortController,a={signal:m.signal,credential:"include",headers:new Headers(q),method:String(o).toUpperCase()},u=0,e=0,s=0,h=0,c=!1,E=!1,p=null,t=null,i=null,b=g=>{let w=()=>{let l=()=>window.fetch(g,a).then(async n=>{if(c)return m.abort(),new Response(null,{status:n.status,statusText:n.statusText,headers:new Headers(n.headers)});if(!n.ok||!i)return n;let f=parseInt(n.headers.get("Content-Length")??0);if(f===0)return n;let y=[],T=0,A=n.body.getReader();for(;;){let{done:I,value:$}=await A.read();if(I)break;y.push($),T+=$.length,await i(T,f,window.structuredClone?window.structuredClone(y):y)}let L=n.headers.get("Content-Type")??"application/octet-stream";return new Response(new Blob(y,{type:L}),{status:n.status,statusText:n.statusText,headers:new Headers(n.headers)})});if(u===0||c)return l();if(a.method!=="GET")return console.warn("Only method GET can be cached"),l();let d=D(U);return d.has(g).then(n=>n?Promise.resolve(n):d.del(g).then(l).then(f=>d.set(g,f,E,u)))};if(e===0||s===0)return w();let v=async()=>{try{return await w()}catch(l){if(l.name===_)throw l;if(s*=2,h++,h>e)throw new Error(`Max retries reached: ${l}`);return console.warn(`Retrying fetch (${h}/${e}): ${g.toString()}`),await new Promise(d=>window.setTimeout(d,s)),v()}};return v()},x=g=>{if(g.status!==200)return Promise.resolve(g);let w=document.querySelector("a[download]");w&&document.body.removeChild(w);let v=g.headers.get("Content-Disposition")?.match(/filename="(.+)"/)?.[1];return g.clone().blob().then(l=>{let d=document.createElement("a"),n=window.URL.createObjectURL(l);return d.href=n,d.download=v||`${t}.${p||(l.type.split("/")?.[1]??"bin")}`,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(n),g})};return{send(g=null){return t&&Object.keys(q).forEach(w=>a.headers.delete(w)),b(new URL(r,document.body.getAttribute("data-url"))).then(w=>t&&w.ok?x(w).then(v=>({code:v.status,data:v,error:null})):w.json().then(v=>{if(v.error){let l=v.error.at(0),d=w.status>=500;throw new Error(d?`ID: ${v.id}
\u{1F7E5} ${l}`:`\u{1F7E8} ${l}`)}return g&&(v.data=g(v.data)),Object.assign(v,{code:w.status})})).catch(w=>{if(w.name===_)return console.warn("Fetch aborted:",w),w;throw w.name===ne&&(w=new Error("\u{1F7E5} Network error or rate limit exceeded")),alert(w.message??String(w)),w})},withCache(g=1e3*60*60*6){return u=g,this},withForceCache(g=1e3*60*60*6){return E=!0,u===0&&(u=g),this},withNoBody(){return c=!0,this},withRetry(g=3,w=1e3){return e=g,s=w,this},withCancel(g){return g==null?this:((async()=>(await g,m.abort()))(),this)},withDownload(g,w=null){return t=g,p=w,this},withProgressFunc(g=null){return i=g,this},default(g=null){return a.headers=new Headers(g??{}),b(r).then(w=>t?x(w):Promise.resolve(w))},token(g){return g.split(".").length===3?(a.headers.append("Authorization","Bearer "+g),this):(a.headers.append("x-access-key",g),this)},body(g){if(a.method==="GET")throw new Error("GET method does not support body");return a.body=JSON.stringify(g),this}}};var O=o=>{let r=new Map,m=new Map,a=D(o),u=1e3*60*60*6,e=!1,s=(i,b)=>{if(!b.ok)throw new Error(b.statusText);return a.set(i,b,e,u)},h=i=>a.has(i),c=i=>a.del(i),E=(i,b=null)=>{if(r.has(i))return Promise.resolve(r.get(i));if(m.has(i))return m.get(i);let x=()=>P("GET",i).withCancel(b).withRetry().default(),g=h(i).then(w=>w?Promise.resolve(w):c(i).then(x).then(v=>s(i,v))).then(w=>w.blob()).then(w=>r.set(i,URL.createObjectURL(w))).then(()=>r.get(i)).finally(()=>m.delete(i));return m.set(i,g),g};return{run:(i,b=null)=>{let x=new Map;return i.length===0?Promise.resolve():(i.filter(g=>g!==null).forEach(g=>{let w=x.get(g.url)??[];x.set(g.url,[...w,[g.res,g?.rej]])}),Promise.allSettled(Array.from(x).map(([g,w])=>E(g,b).then(v=>(w.forEach(l=>l[0]?.(v)),v)).catch(v=>(w.forEach(l=>l[1]?.(v)),v)))))},del:c,has:h,set:s,get:E,open,download:async(i,b)=>{if(!new Map(Array.from(r.entries()).map(([g,w])=>[w,g])).has(i))try{if(!new URL(i).protocol.includes("blob"))throw new Error("Is not blob")}catch{i=await E(i)}return P("GET",i).withDownload(b).default()},setTtl(i){return u=Number(i),this},withForceCache(){return e=!0,this}}};var j=(()=>{let o=null,r=()=>{let a=document.getElementById("video-love-stroy");if(!a||!a.hasAttribute("data-src"))return a?.remove(),C.complete("video",!0),Promise.resolve();let u=a.getAttribute("data-src");if(!u)return C.complete("video",!0),Promise.resolve();let e=document.createElement("video");e.className=a.getAttribute("data-vid-class"),e.loop=!0,e.muted=!0,e.controls=!1,e.autoplay=!1,e.playsInline=!0,e.preload="metadata";let s=new IntersectionObserver(E=>E.forEach(p=>p.isIntersecting?e.play():e.pause())),h=E=>{e.preload="auto",e.controls=!0,e.disableRemotePlayback=!0,e.disablePictureInPicture=!0,e.controlsList="noremoteplayback nodownload noplaybackrate",e.src=URL.createObjectURL(E)},c=()=>{let E=document.getElementById("progress-bar-video-love-stroy"),p=document.getElementById("progress-info-video-love-stroy");return P("GET",u).withNoBody().default({Range:"bytes=0-1"}).then(t=>{if(t.status===200)return e.preload="none",e.src=S.escapeHtml(u),a.appendChild(e),Promise.resolve();if(t.status!==206)throw new Error("failed to fetch video");e.addEventListener("error",()=>C.invalid("video"));let i=new Promise(b=>e.addEventListener("loadedmetadata",b,{once:!0}));return e.src=S.escapeHtml(u),a.appendChild(e),i}).then(()=>{e.pause(),e.currentTime=0,C.complete("video");let t=e.getBoundingClientRect().width*(e.videoHeight/e.videoWidth);return e.style.height=`${t}px`,a.style.height=`${t}px`,P("GET",u).withRetry().withProgressFunc((i,b)=>{let x=Number(i/b*100).toFixed(0)+"%";E.style.width=x,p.innerText=x}).default()}).then(t=>t.clone().blob().then(i=>{let b=new Promise(x=>e.addEventListener("loadedmetadata",x,{once:!0}));return h(i),e.load(),b.then(()=>t)})).catch(t=>{E.style.backgroundColor="red",p.innerText="Error loading video",console.error(t)})};return o.has(u).then(E=>E?E.blob().then(p=>{let t=new Promise(i=>e.addEventListener("loadedmetadata",i,{once:!0}));return h(p),a.appendChild(e),t.then(()=>C.complete("video"))}):o.del(u).then(c).then(p=>o.set(u,p))).then(()=>{s.observe(e),e.style.removeProperty("height"),a.style.removeProperty("height"),document.getElementById("video-love-stroy-loading")?.remove()})};return{init:()=>(C.add(),o=O("video").withForceCache(),{load:r})}})();var z=(()=>{let o=null,r=null,m=[],a=t=>new Promise((i,b)=>{let x=new Image;x.onload=()=>i(x),x.onerror=b,x.src=t}),u=(t,i)=>a(i).then(b=>{t.width=b.naturalWidth,t.height=b.naturalHeight,t.classList.remove("opacity-0"),t.src=b.src,b.remove(),C.complete("image")}),e=t=>{m.push({url:t.getAttribute("data-src"),res:i=>u(t,i),rej:i=>{console.error(i),C.invalid("image")}})},s=t=>{t.onerror=()=>C.invalid("image"),t.onload=()=>{t.width=t.naturalWidth,t.height=t.naturalHeight,C.complete("image")},t.complete&&t.naturalWidth!==0&&t.naturalHeight!==0?C.complete("image"):t.complete&&C.invalid("image")},h=()=>Array.from(o).some(t=>t.hasAttribute("data-src")),c=async()=>{let t=Array.from(o),i=async b=>{m.length=0,t.filter(b).forEach(x=>x.hasAttribute("data-src")?e(x):s(x)),await r.run(m,C.getAbort())};await i(b=>b.hasAttribute("fetchpriority")),await i(b=>!b.hasAttribute("fetchpriority"))},E=t=>{r.download(t,`${window.location.hostname}_image_${Date.now()}`)};return{init:()=>(r=O("image").withForceCache(),o=document.querySelectorAll("img"),o.forEach(C.add),{load:c,download:E,hasDataSrc:h})}})();var G=(()=>{let o='<i class="fa-solid fa-circle-pause spin-button"></i>',r='<i class="fa-solid fa-circle-play"></i>',m=async(u=!0)=>{let e=document.body.getAttribute("data-audio");if(!e){C.complete("audio",!0);return}let s=null;try{s=new Audio(await O("audio").withForceCache().get(e,C.getAbort())),s.loop=!0,s.muted=!1,s.autoplay=!1,s.controls=!1,C.complete("audio")}catch{C.invalid("audio");return}let h=!1,c=document.getElementById("button-music"),E=async()=>{if(!(!navigator.onLine||!c)){c.disabled=!0;try{await s.play(),h=!0,c.disabled=!1,c.innerHTML=o}catch(t){h=!1,S.notify(t).error()}}},p=()=>{h=!1,s.pause(),c.innerHTML=r};document.addEventListener("undangan.open",()=>{c.classList.remove("d-none"),u&&E()}),c.addEventListener("offline",p),c.addEventListener("click",()=>h?p():E())};return{init:()=>(C.add(),{load:m})}})();var W={tab:m=>window.bootstrap.Tab.getOrCreateInstance(document.getElementById(m)),modal:m=>window.bootstrap.Modal.getOrCreateInstance(document.getElementById(m))};var re=o=>{let r="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css",m="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js",a=()=>o.get(r).then(e=>new Promise((s,h)=>{let c=document.createElement("link");c.onload=s,c.onerror=h,c.rel="stylesheet",c.href=e,document.head.appendChild(c)})),u=()=>o.get(m).then(e=>new Promise((s,h)=>{let c=document.createElement("script");c.onload=s,c.onerror=h,c.src=e,document.head.appendChild(c)}));return Promise.all([a(),u()]).then(()=>{if(typeof window.AOS>"u")throw new Error("AOS library failed to load");window.AOS.init()})},se=o=>o.get("https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.js").then(m=>new Promise((a,u)=>{let e=document.createElement("script");e.onerror=u,e.onload=()=>{typeof window.confetti>"u"?u(new Error("Confetti library failed to load")):a()},e.src=m,document.head.appendChild(e)})),ae=o=>{let r=[{css:"https://fonts.googleapis.com/css2?family=Sacramento&display=swap",family:"Sacramento"},{css:"https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic&display=swap",family:"Noto Naskh Arabic"}],m=({css:a,family:u})=>o.get(a).then(e=>new Promise((s,h)=>{let c=document.createElement("link");c.onload=s,c.onerror=h,c.rel="stylesheet",c.href=e,document.head.appendChild(c)})).then(()=>document.fonts.load(`1em "${u}"`));return Promise.all(r.map(m))},V=(o={})=>{let r=[],m=O("libs").withForceCache();return(o?.aos??!0)&&r.push(re(m)),(o?.confetti??!0)&&r.push(se(m)),(o?.additionalFont??!0)&&r.push(ae(m)),Promise.all(r)};var k=o=>{let r=(s=null)=>{let h=JSON.parse(localStorage.getItem(o));return s?h[String(s)]:h},m=(s,h)=>{let c=r();c[String(s)]=h,localStorage.setItem(o,JSON.stringify(c))},a=s=>Object.keys(r()).includes(String(s)),u=s=>{if(!a(s))return;let h=r();delete h[String(s)],localStorage.setItem(o,JSON.stringify(h))},e=()=>localStorage.setItem(o,"{}");return localStorage.getItem(o)||e(),{set:m,get:r,has:a,clear:e,unset:u}};var H=(()=>{let o={"#000000":"#ffffff","#ffffff":"#000000","#212529":"#f8f9fa","#f8f9fa":"#212529"},r=["#ffffff","#f8f9fa"],m=["#000000","#212529"],a=!1,u=null,e=null,s=()=>u.set("active","light"),h=()=>u.set("active","dark"),c=w=>{let v=e.getAttribute("content");e.setAttribute("content",w.some(l=>l===v)?o[v]:v)},E=()=>{s(),document.documentElement.setAttribute("data-bs-theme","light"),c(m)},p=()=>{h(),document.documentElement.setAttribute("data-bs-theme","dark"),c(r)},t=(w=null,v=null)=>{let l=u.get("active")==="dark";return w&&v?l?w:v:l};return{init:()=>{switch(u=k("theme"),e=document.querySelector('meta[name="theme-color"]'),u.has("active")||(window.matchMedia("(prefers-color-scheme: dark)").matches?h():s()),document.documentElement.getAttribute("data-bs-theme")){case"dark":h();break;case"light":s();break;default:a=!0}t()?p():E()},spyTop:()=>{let w=l=>l.filter(d=>d.isIntersecting).forEach(d=>{let n=d.target.classList.contains("bg-white-black")?t(m[0],r[0]):t(m[1],r[1]);e.setAttribute("content",n)}),v=new IntersectionObserver(w,{rootMargin:"0% 0% -95% 0%"});document.querySelectorAll("section").forEach(l=>v.observe(l))},change:()=>t()?E():p(),isDarkMode:t,isAutoMode:()=>a}})();var J=(()=>{let o={id:"ID",en:"US",fr:"FR",de:"DE",es:"ES",zh:"CN",ja:"JP",ko:"KR",ar:"SA",ru:"RU",it:"IT",nl:"NL",pt:"PT",tr:"TR",th:"TH",vi:"VN",ms:"MY",hi:"IN"},r=null,m=null,a=null,u=null;return{on(e,s){return u.set(e,s),this},get(){let e=u.get(a);return u.clear(),e},getCountry(){return r},getLocale(){return m},getLanguage(){return a},setDefault(e){let s=!0;o[e]||(s=!1,console.warn("Language not found, please add manually in countryMapping")),r=s?o[e]:"US",a=s?e:"en",m=`${a}_${r}`},init(){u=new Map,this.setDefault(navigator.language.split("-").shift())}}})();var K=(()=>{let o=({uuid:p,own:t,name:i,presence:b,comment:x,created_at:g,is_admin:w,is_parent:v,gif_url:l,ip:d,user_agent:n,comments:f,like_count:y})=>({uuid:p,own:t,name:i,presence:b,comment:x,created_at:g,is_admin:w??!1,is_parent:v,gif_url:l,ip:d,user_agent:n,comments:f?.map(o)??[],like_count:y??0}),r=p=>p.map(o);return{uuidResponse:({uuid:p})=>({uuid:p}),tokenResponse:({token:p})=>({token:p}),statusResponse:({status:p})=>({status:p}),getCommentResponse:o,getCommentsResponse:r,getCommentsResponseV2:p=>({count:p.count,lists:r(p.lists)}),commentShowMore:(p,t=!1)=>({uuid:p,show:t}),postCommentRequest:(p,t,i,b,x)=>({id:p,name:t,presence:i,comment:b,gif_id:x}),postSessionRequest:(p,t)=>({email:p,password:t}),updateCommentRequest:(p,t,i)=>({presence:p,comment:t,gif_id:i})}})();var F=(()=>{let o=null,r=()=>o.get("token"),m=p=>o.set("token",p),a=p=>P(N,"/api/session").body(p).send(K.tokenResponse).then(t=>(t.code===200&&m(t.data.token),t.code===200)),u=()=>o.unset("token"),e=()=>String(r()??".").split(".").length===3,s=p=>P("GET","/api/v2/config").withCache(1e3*60*30).withForceCache().token(p).send().then(t=>{if(t.code!==200)throw new Error("failed to get config.");let i=k("config");for(let[b,x]of Object.entries(t.data))i.set(b,x);return m(p),t}),h=()=>{if(!e())return null;try{return JSON.parse(S.base64Decode(r().split(".")[1]))}catch{return null}};return{init:()=>{o=k("session")},guest:s,isValid:()=>e()?(h()?.exp??0)>Date.now()/1e3:!1,login:a,logout:u,decode:h,isAdmin:e,setToken:m,getToken:r}})();var Z=(()=>{let o=null,r=!0,m=["input[data-offline-disabled]","button[data-offline-disabled]","select[data-offline-disabled]","textarea[data-offline-disabled]"],a=()=>r,u=()=>{let t=o.firstElementChild.firstElementChild;t.classList.remove("bg-success"),t.classList.add("bg-danger"),t.firstElementChild.innerHTML='<i class="fa-solid fa-ban me-2"></i>Koneksi tidak tersedia'},e=()=>{let t=o.firstElementChild.firstElementChild;t.classList.remove("bg-danger"),t.classList.add("bg-success"),t.firstElementChild.innerHTML='<i class="fa-solid fa-cloud me-2"></i>Koneksi tersedia kembali'},s=async()=>{r&&(await S.changeOpacity(o,!1),u())},h=()=>{document.querySelectorAll(m.join(", ")).forEach(t=>{t.dispatchEvent(new Event(a()?"online":"offline")),t.setAttribute("data-offline-disabled",a()?"false":"true"),t.tagName==="BUTTON"?a()?t.classList.remove("disabled"):t.classList.add("disabled"):a()?t.removeAttribute("disabled"):t.setAttribute("disabled","true")})},c=()=>{r=!1,u(),S.changeOpacity(o,!0),h()},E=()=>{r=!0,e(),S.timeOut(s,3e3),h()};return{init:()=>{window.addEventListener("online",E),window.addEventListener("offline",c),o=document.createElement("div"),o.classList.add("fixed-top","pe-none"),o.style.cssText="opacity: 0; z-index: 1057;",o.innerHTML=`
        <div class="d-flex justify-content-center mx-auto">
            <div class="d-flex justify-content-center align-items-center rounded-pill my-2 bg-danger shadow">
                <small class="text-center py-1 px-2 mx-1 mt-1 mb-0 text-white" style="font-size: 0.8rem;"></small>
            </div>
        </div>`,document.body.insertBefore(o,document.body.lastChild)},isOnline:a}})();var Q=()=>window.confetti.shapeFromPath({path:"M256 464C256 464 48 320 48 192C48 123 103 64 172 64C214 64 248 86 256 117C264 86 298 64 340 64C409 64 464 123 464 192C464 320 256 464 256 464Z",matrix:[.06,0,0,.06,-15,-15]}),X=()=>{window.confetti&&window.confetti({origin:{y:1},zIndex:1057})},Y=(o=300)=>{if(!window.confetti)return;let r=o*1e3,m=Date.now()+r,a=Q(),u=["#FFC0CB","#FF1493","#C71585"],e=(h,c)=>Math.random()*(c-h)+h,s=()=>{let h=m-Date.now();u.forEach(c=>{window.confetti({particleCount:1,startVelocity:0,ticks:Math.max(50,75*(h/r)),origin:{x:Math.random(),y:Math.abs(Math.random()-h/r)},zIndex:1057,colors:[c],shapes:[a],drift:e(-.5,.5),gravity:e(.5,1),scalar:e(.5,1)})}),h>0&&requestAnimationFrame(s)};requestAnimationFrame(s)},ee=(o,r=50)=>{if(!window.confetti)return;let m=Date.now()+r,a=o.getBoundingClientRect(),u=Math.max(.3,Math.min(1,a.top/window.innerHeight+.2)),e=Q(),s=["#FF69B4","#FF1493"],h=()=>{s.forEach(c=>{window.confetti({particleCount:2,angle:60,spread:55,shapes:[e],origin:{x:a.left/window.innerWidth,y:u},zIndex:1057,colors:[c]}),window.confetti({particleCount:2,angle:120,spread:55,shapes:[e],origin:{x:a.right/window.innerWidth,y:u},zIndex:1057,colors:[c]})}),Date.now()<m&&requestAnimationFrame(h)};requestAnimationFrame(h)};var te=(()=>{let o=null,r=null,m=()=>{let l=new Date(document.body.getAttribute("data-time").replace(" ","T")).getTime(),d=L=>L<10?`0${L}`:`${L}`,n=document.getElementById("day"),f=document.getElementById("hour"),y=document.getElementById("minute"),T=document.getElementById("second"),A=()=>{let L=Math.abs(l-Date.now());n.textContent=d(Math.floor(L/(1e3*60*60*24))),f.textContent=d(Math.floor(L%(1e3*60*60*24)/(1e3*60*60))),y.textContent=d(Math.floor(L%(1e3*60*60)/(1e3*60))),T.textContent=d(Math.floor(L%(1e3*60)/1e3)),S.timeOut(A,1e3-Date.now()%1e3)};S.timeOut(A)},a=()=>{let l=window.location.search.split("to="),d=null;if(l.length>1&&l[1].length>=1&&(d=window.decodeURIComponent(l[1])),d){let f=document.getElementById("guest-name"),y=document.createElement("div");y.classList.add("m-2");let T=`<small class="mt-0 mb-1 mx-0 p-0">${S.escapeHtml(f?.getAttribute("data-message"))}</small><p class="m-0 p-0" style="font-size: 1.25rem">${S.escapeHtml(d)}</p>`;S.safeInnerHTML(y,T),f?.appendChild(y)}let n=document.getElementById("form-name");n&&(n.value=o.get("name")??d)},u=async()=>{let d=document.querySelectorAll(".slide-desktop");if(!d||d.length===0)return;let n=document.getElementById("root")?.querySelector(".d-sm-block");if(!n||(n.dispatchEvent(new Event("undangan.slide.stop")),window.getComputedStyle(n).display==="none"))return;if(d.length===1){await S.changeOpacity(d[0],!0);return}let f=0;for(let[L,I]of d.entries())if(L===f){I.classList.add("slide-desktop-active"),await S.changeOpacity(I,!0);break}let y=!0,T=async()=>(await S.changeOpacity(d[f],!1),d[f].classList.remove("slide-desktop-active"),f=(f+1)%d.length,y&&(d[f].classList.add("slide-desktop-active"),await S.changeOpacity(d[f],!0)),y);n.addEventListener("undangan.slide.stop",()=>{y=!1});let A=async()=>{await T()&&S.timeOut(A,6e3)};S.timeOut(A,6e3)},e=l=>{l.disabled=!0,document.body.scrollIntoView({behavior:"instant"}),document.getElementById("root").classList.remove("opacity-0"),H.isAutoMode()&&document.getElementById("button-theme").classList.remove("d-none"),u(),H.spyTop(),X(),S.timeOut(Y,1500),document.dispatchEvent(new Event("undangan.open")),S.changeOpacity(document.getElementById("welcome"),!1).then(d=>d.remove())},s=l=>{document.getElementById("button-modal-click").setAttribute("href",l.src),document.getElementById("button-modal-download").setAttribute("data-src",l.src);let d=document.getElementById("show-modal-image");d.src=l.src,d.width=l.width,d.height=l.height,W.modal("modal-image").show()},h=()=>{document.getElementById("show-modal-image").addEventListener("click",l=>{let d=l.currentTarget.parentNode.querySelector(".position-absolute");d.classList.contains("d-none")?d.classList.replace("d-none","d-flex"):d.classList.replace("d-flex","d-none")})},c=l=>{navigator.vibrate&&navigator.vibrate(500),ee(l,100),S.changeOpacity(l,!1).then(d=>d.remove())},E=()=>o.set("info",!0),p=()=>{document.querySelectorAll(".font-arabic").forEach(l=>{l.innerHTML=String(l.innerHTML).normalize("NFC")})},t=()=>{document.querySelectorAll("svg").forEach(l=>{l.hasAttribute("data-class")&&S.timeOut(()=>l.classList.add(l.getAttribute("data-class")),parseInt(l.getAttribute("data-time")))})},i=()=>{let l=f=>new Date(f.replace(" ","T")+":00Z").toISOString().replace(/[-:]/g,"").split(".").shift(),d=new URL("https://calendar.google.com/calendar/render"),n=new URLSearchParams({action:"TEMPLATE",text:"L\u1EC5 c\u01B0\u1EDBi H\u1EEFu Chinh & Thanh Tr\xFAc",dates:`${l("2025-11-23 11:30")}/${l("2025-11-23 17:00")}`,details:"Ch\xFAng t\xF4i h\xE2n h\u1EA1nh m\u1EDDi Qu\xFD v\u1ECB \u0111\u1EBFn chung vui trong ng\xE0y tr\u1ECDng \u0111\u1EA1i c\u1EE7a ch\xFAng t\xF4i. S\u1EF1 c\xF3 m\u1EB7t v\xE0 l\u1EDDi ch\xFAc c\u1EE7a Qu\xFD v\u1ECB ch\xEDnh l\xE0 m\xF3n qu\xE0 \xFD ngh\u0129a nh\u1EA5t.",location:"5J8P+HC7, Th\u1EA1nh Tr\u1ECB, B\xECnh \u0110\u1EA1i, B\u1EBFn Tre",ctz:r.get("vn")});d.search=n.toString(),document.querySelector("#home button")?.addEventListener("click",()=>window.open(d,"_blank"))},b=()=>(C.add(),{load:d=>{V(d).then(()=>C.complete("libs")).catch(()=>C.invalid("libs"))}}),x=async()=>{t(),m(),a(),h(),p(),i(),o.has("presence")&&(document.getElementById("form-presence").value=o.get("presence")?"1":"2"),o.get("info")&&document.getElementById("information")?.remove(),await S.changeOpacity(document.getElementById("welcome"),!0),await S.changeOpacity(document.getElementById("loading"),!1).then(l=>l.remove())},g=()=>{J.init(),Z.init(),C.init(),r=k("config"),o=k("information");let l=j.init(),d=z.init(),n=G.init(),f=b(),y=document.body.getAttribute("data-key");window.addEventListener("resize",S.debounce(u)),document.addEventListener("undangan.progress.done",()=>x()),document.addEventListener("hide.bs.modal",()=>document.activeElement?.blur()),document.getElementById("button-modal-download").addEventListener("click",T=>{d.download(T.currentTarget.getAttribute("data-src"))}),(!y||y.length<=0)&&(document.getElementById("comment")?.remove(),document.querySelector('a.nav-link[href="#comment"]')?.closest("li.nav-item")?.remove(),l.load(),d.load(),n.load(),f.load({confetti:document.body.getAttribute("data-confetti")==="true"})),y&&y.length>0&&(C.add(),C.add(),d.hasDataSrc()||d.load(),document.dispatchEvent(new Event("undangan.session")),d.hasDataSrc()&&d.load(),l.load(),n.load(),f.load({confetti:!0}),C.complete("config"),C.complete("comment"))},w=async()=>{let d=window.location.search.replace("?","").split("&").find(T=>T.startsWith("g="))?.split("=")[1]||"1",y=(await(await fetch("./assets/guests/data.json")).json()).find(T=>T.id===d);if(y){let T=document.getElementById("guest-name");T&&(T.innerHTML=y.name)}};return{init:()=>(H.init(),F.init(),F.isAdmin()&&(k("user").clear(),k("owns").clear(),k("likes").clear(),k("session").clear()),window.addEventListener("load",()=>{B.init(g,["image","video","audio","libs"])}),w(),{util:S,theme:H,guest:{open:e,modal:s,showStory:c,closeInformation:E}})}})();(o=>{o.undangan=te.init()})(window);})();
