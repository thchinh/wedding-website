(()=>{var x=(()=>{let r='<span class="spinner-border spinner-border-sm my-0 ms-0 me-1 p-0" style="height: 0.8rem; width: 0.8rem;"></span>',a=[["*",'<strong class="text-theme-auto">$1</strong>'],["_",'<em class="text-theme-auto">$1</em>'],["~",'<del class="text-theme-auto">$1</del>'],["```",'<code class="font-monospace text-theme-auto">$1</code>']],u=[{type:"Mobile",regex:/Android.*Mobile|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i},{type:"Tablet",regex:/iPad|Android(?!.*Mobile)|Tablet/i},{type:"Desktop",regex:/Windows NT|Macintosh|Linux/i}],i=[{name:"Chrome",regex:/Chrome|CriOS/i},{name:"Safari",regex:/Safari/i},{name:"Edge",regex:/Edg|Edge/i},{name:"Firefox",regex:/Firefox|FxiOS/i},{name:"Opera",regex:/Opera|OPR/i},{name:"Internet Explorer",regex:/MSIE|Trident/i},{name:"Samsung Browser",regex:/SamsungBrowser/i}],m=[{name:"Windows",regex:/Windows NT ([\d.]+)/i},{name:"MacOS",regex:/Mac OS X ([\d_.]+)/i},{name:"Android",regex:/Android ([\d.]+)/i},{name:"iOS",regex:/OS ([\d_]+) like Mac OS X/i},{name:"Linux",regex:/Linux/i},{name:"Ubuntu",regex:/Ubuntu/i},{name:"Chrome OS",regex:/CrOS/i}],o=e=>String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),l=e=>{let n=f=>{window.alert(`${f} ${e}`)};return{success:()=>n("\u{1F7E9}"),error:()=>n("\u{1F7E5}"),warning:()=>n("\u{1F7E8}"),info:()=>n("\u{1F7E6}"),custom:f=>n(f)}},h=e=>window.confirm(`\u{1F7E6} ${e}`),c=(e,n)=>(e.replaceChildren(document.createRange().createContextualFragment(n)),e),y=(e,n,f=.05)=>new Promise(w=>{let C=parseFloat(e.style.opacity),I=n?1:0,L=()=>{C+=n?f:-f,C=Math.max(0,Math.min(1,C)),e.style.opacity=C.toFixed(2),n&&C>=I||!n&&C<=I?(e.style.opacity=I.toString(),w(e)):requestAnimationFrame(L)};requestAnimationFrame(L)}),d=(e,n=0)=>{let f=null;f=setTimeout(()=>{e(),clearTimeout(f),f=null},n)};return{loader:r,ask:h,copy:async(e,n=null,f=1500)=>{let w=e.getAttribute("data-copy");if(!w||w.length===0){l("Nothing to copy").warning();return}e.disabled=!0;try{await navigator.clipboard.writeText(w)}catch{e.disabled=!1,l("Failed to copy").error();return}let C=e.innerHTML;c(e,n||'<i class="fa-solid fa-check"></i>'),d(()=>{e.disabled=!1,e.innerHTML=C},f)},notify:l,timeOut:d,debounce:(e,n=100)=>{let f=null;return(...w)=>{clearTimeout(f),f=setTimeout(()=>e(...w),n)}},escapeHtml:o,base64Encode:e=>{let f=new TextEncoder().encode(e);return window.btoa(String.fromCharCode(...f))},base64Decode:e=>{let n=new TextDecoder,f=Uint8Array.from(window.atob(e),w=>w.charCodeAt(0));return n.decode(f)},disableButton:(e,n="Loading",f=!1)=>{e.disabled=!0;let w=e.innerHTML;return c(e,f?n:r+n),{restore:(C=!1)=>{e.innerHTML=w,e.disabled=C}}},disableCheckbox:e=>{e.disabled=!0;let n=document.querySelector(`label[for="${e.id}"]`),f=n.innerHTML;return c(n,r+f),{restore:()=>{n.innerHTML=f,e.disabled=!1}}},safeInnerHTML:c,parseUserAgent:e=>{if(!e||typeof e!="string")return"Unknown";let n=u.find(L=>L.regex.test(e))?.type??"Unknown",f=i.find(L=>L.regex.test(e))?.name??"Unknown",w=m.find(L=>L.regex.test(e)),C=w?w.name:"Unknown",I=w?e.match(w.regex)?.[1]?.replace(/_/g,".")??null:null;return`${f} ${n} ${I?`${C} ${I}`:C}`},changeOpacity:y,getGMTOffset:e=>{let n=new Date,f=new Intl.DateTimeFormat("en-US",{timeZone:e,hourCycle:"h23",hour:"numeric"}),w=(parseInt(f.format(n))-n.getUTCHours()+24)%24;return w>12&&(w-=24),`GMT${w>=0?"+":""}${w}`},convertMarkdownToHTML:e=>(a.forEach(([n,f])=>{e=e.replace(new RegExp(`\\${n}(\\S(?:[\\s\\S]*?\\S)?)\\${n}`,"g"),f)}),e)}})();var O=r=>{let a=(l=null)=>{let h=JSON.parse(localStorage.getItem(r));return l?h[String(l)]:h},u=(l,h)=>{let c=a();c[String(l)]=h,localStorage.setItem(r,JSON.stringify(c))},i=l=>Object.keys(a()).includes(String(l)),m=l=>{if(!i(l))return;let h=a();delete h[String(l)],localStorage.setItem(r,JSON.stringify(h))},o=()=>localStorage.setItem(r,"{}");return localStorage.getItem(r)||o(),{set:u,get:a,has:i,clear:o,unset:m}};var D=(()=>{let r=({uuid:d,own:t,name:s,presence:b,comment:E,created_at:p,is_admin:g,is_parent:T,gif_url:v,ip:A,user_agent:e,comments:n,like_count:f})=>({uuid:d,own:t,name:s,presence:b,comment:E,created_at:p,is_admin:g??!1,is_parent:T,gif_url:v,ip:A,user_agent:e,comments:n?.map(r)??[],like_count:f??0}),a=d=>d.map(r);return{uuidResponse:({uuid:d})=>({uuid:d}),tokenResponse:({token:d})=>({token:d}),statusResponse:({status:d})=>({status:d}),getCommentResponse:r,getCommentsResponse:a,getCommentsResponseV2:d=>({count:d.count,lists:a(d.lists)}),commentShowMore:(d,t=!1)=>({uuid:d,show:t}),postCommentRequest:(d,t,s,b,E)=>({id:d,name:t,presence:s,comment:b,gif_id:E}),postSessionRequest:(d,t)=>({email:d,password:t}),updateCommentRequest:(d,t,s)=>({presence:d,comment:t,gif_id:s})}})();var N="POST";var $="AbortError",ne="TypeError",U={Accept:"application/json","Content-Type":"application/json"},j="request",_=(()=>{let r=null;return{getInstance:a=>{if(!r||!r.has(a))throw new Error(`please init cache first: ${a}`);return r.get(a)},restart:async a=>{r.set(a,null),r.delete(a),await window.caches.delete(a),await window.caches.open(a).then(u=>r.set(a,u))},init:(a,u=[])=>{if(!window.isSecureContext)throw new Error("this application required secure context");r=new Map,Promise.all(u.concat([j]).map(i=>window.caches.open(i).then(m=>r.set(i,m)))).then(()=>a())}}})(),F=r=>{let a=_.getInstance(r);return{set:(o,l,h,c)=>l.clone().arrayBuffer().then(y=>{if(!l.ok)return l;let d=new Date,t=new Headers(l.headers);if(t.has("Date")||t.set("Date",d.toUTCString()),h||!t.has("Cache-Control")){if(!h&&t.has("Expires")){let s=new Date(t.get("Expires"));c=Math.max(0,s.getTime()-d.getTime())}if(c===0)throw new Error("Cache max age cannot be 0");t.set("Cache-Control",`public, max-age=${Math.floor(c/1e3)}`)}return t.has("Content-Length")||t.set("Content-Length",String(y.byteLength)),a.put(o,new Response(y,{headers:t})).then(()=>l)}),has:o=>a.match(o).then(l=>{if(!l)return null;let h=l.headers.get("Cache-Control").match(/max-age=(\d+)/)[1],c=Date.parse(l.headers.get("Date"))+parseInt(h)*1e3;return Date.now()>c?null:l}),del:o=>a.delete(o)}},k=(r,a)=>{let u=new AbortController,i={signal:u.signal,credential:"include",headers:new Headers(U),method:String(r).toUpperCase()},m=0,o=0,l=0,h=0,c=!1,y=!1,d=null,t=null,s=null,b=p=>{let g=()=>{let v=()=>window.fetch(p,i).then(async e=>{if(c)return u.abort(),new Response(null,{status:e.status,statusText:e.statusText,headers:new Headers(e.headers)});if(!e.ok||!s)return e;let n=parseInt(e.headers.get("Content-Length")??0);if(n===0)return e;let f=[],w=0,C=e.body.getReader();for(;;){let{done:L,value:P}=await C.read();if(L)break;f.push(P),w+=P.length,await s(w,n,window.structuredClone?window.structuredClone(f):f)}let I=e.headers.get("Content-Type")??"application/octet-stream";return new Response(new Blob(f,{type:I}),{status:e.status,statusText:e.statusText,headers:new Headers(e.headers)})});if(m===0||c)return v();if(i.method!=="GET")return console.warn("Only method GET can be cached"),v();let A=F(j);return A.has(p).then(e=>e?Promise.resolve(e):A.del(p).then(v).then(n=>A.set(p,n,y,m)))};if(o===0||l===0)return g();let T=async()=>{try{return await g()}catch(v){if(v.name===$)throw v;if(l*=2,h++,h>o)throw new Error(`Max retries reached: ${v}`);return console.warn(`Retrying fetch (${h}/${o}): ${p.toString()}`),await new Promise(A=>window.setTimeout(A,l)),T()}};return T()},E=p=>{if(p.status!==200)return Promise.resolve(p);let g=document.querySelector("a[download]");g&&document.body.removeChild(g);let T=p.headers.get("Content-Disposition")?.match(/filename="(.+)"/)?.[1];return p.clone().blob().then(v=>{let A=document.createElement("a"),e=window.URL.createObjectURL(v);return A.href=e,A.download=T||`${t}.${d||(v.type.split("/")?.[1]??"bin")}`,document.body.appendChild(A),A.click(),document.body.removeChild(A),window.URL.revokeObjectURL(e),p})};return{send(p=null){return t&&Object.keys(U).forEach(g=>i.headers.delete(g)),b(new URL(a,document.body.getAttribute("data-url"))).then(g=>t&&g.ok?E(g).then(T=>({code:T.status,data:T,error:null})):g.json().then(T=>{if(T.error){let v=T.error.at(0),A=g.status>=500;throw new Error(A?`ID: ${T.id}
\u{1F7E5} ${v}`:`\u{1F7E8} ${v}`)}return p&&(T.data=p(T.data)),Object.assign(T,{code:g.status})})).catch(g=>{if(g.name===$)return console.warn("Fetch aborted:",g),g;throw g.name===ne&&(g=new Error("\u{1F7E5} Network error or rate limit exceeded")),alert(g.message??String(g)),g})},withCache(p=1e3*60*60*6){return m=p,this},withForceCache(p=1e3*60*60*6){return y=!0,m===0&&(m=p),this},withNoBody(){return c=!0,this},withRetry(p=3,g=1e3){return o=p,l=g,this},withCancel(p){return p==null?this:((async()=>(await p,u.abort()))(),this)},withDownload(p,g=null){return t=p,d=g,this},withProgressFunc(p=null){return s=p,this},default(p=null){return i.headers=new Headers(p??{}),b(a).then(g=>t?E(g):Promise.resolve(g))},token(p){return p.split(".").length===3?(i.headers.append("Authorization","Bearer "+p),this):(i.headers.append("x-access-key",p),this)},body(p){if(i.method==="GET")throw new Error("GET method does not support body");return i.body=JSON.stringify(p),this}}};var G=(()=>{let r=null,a=()=>r.get("token"),u=d=>r.set("token",d),i=d=>k(N,"/api/session").body(d).send(D.tokenResponse).then(t=>(t.code===200&&u(t.data.token),t.code===200)),m=()=>r.unset("token"),o=()=>String(a()??".").split(".").length===3,l=d=>k("GET","/api/v2/config").withCache(1e3*60*30).withForceCache().token(d).send().then(t=>{if(t.code!==200)throw new Error("failed to get config.");let s=O("config");for(let[b,E]of Object.entries(t.data))s.set(b,E);return u(d),t}),h=()=>{if(!o())return null;try{return JSON.parse(x.base64Decode(a().split(".")[1]))}catch{return null}};return{init:()=>{r=O("session")},guest:l,isValid:()=>o()?(h()?.exp??0)>Date.now()/1e3:!1,login:i,logout:m,decode:h,isAdmin:o,setToken:u,getToken:a}})();var H=(()=>{let r={"#000000":"#ffffff","#ffffff":"#000000","#212529":"#f8f9fa","#f8f9fa":"#212529"},a=["#ffffff","#f8f9fa"],u=["#000000","#212529"],i=!1,m=null,o=null,l=()=>m.set("active","light"),h=()=>m.set("active","dark"),c=g=>{let T=o.getAttribute("content");o.setAttribute("content",g.some(v=>v===T)?r[T]:T)},y=()=>{l(),document.documentElement.setAttribute("data-bs-theme","light"),c(u)},d=()=>{h(),document.documentElement.setAttribute("data-bs-theme","dark"),c(a)},t=(g=null,T=null)=>{let v=m.get("active")==="dark";return g&&T?v?g:T:v};return{init:()=>{switch(m=O("theme"),o=document.querySelector('meta[name="theme-color"]'),m.has("active")||(window.matchMedia("(prefers-color-scheme: dark)").matches?h():l()),document.documentElement.getAttribute("data-bs-theme")){case"dark":h();break;case"light":l();break;default:i=!0}t()?d():y()},spyTop:()=>{let g=v=>v.filter(A=>A.isIntersecting).forEach(A=>{let e=A.target.classList.contains("bg-white-black")?t(u[0],a[0]):t(u[1],a[1]);o.setAttribute("content",e)}),T=new IntersectionObserver(g,{rootMargin:"0% 0% -95% 0%"});document.querySelectorAll("section").forEach(v=>T.observe(v))},change:()=>t()?y():d(),isDarkMode:t,isAutoMode:()=>i}})();var z={tab:u=>window.bootstrap.Tab.getOrCreateInstance(document.getElementById(u)),modal:u=>window.bootstrap.Modal.getOrCreateInstance(document.getElementById(u))};var W=()=>window.confetti.shapeFromPath({path:"M256 472c-6-4-120-79-177-145C49 292 32 259 32 220 32 154 84 104 150 104c39 0 75 18 98 48 23-30 59-48 98-48 66 0 118 50 118 116 0 39-17 72-47 107-57 66-171 141-177 145-3 2-6 2-9 0z",matrix:[.06,0,0,.06,-15,-15]}),V=()=>{window.confetti&&window.confetti({origin:{y:1},zIndex:1057})},J=(r=3e4)=>{if(!window.confetti)return;let a=8,u=3,i=r*1e3,m=performance.now()+i,o=1e3/Math.max(1,a),l=W(),h=["#FFC0CB","#FF1493","#e70e0eff"],c=(t,s)=>Math.random()*(s-t)+t,y=0;function d(t){if(!(t>=m)){if(t-y>=o){y=t;let s=m-t,b=h[Math.random()*h.length|0];for(let E=0;E<u;E++)window.confetti({particleCount:1,startVelocity:0,ticks:Math.max(50,75*(s/i)),origin:{x:Math.random(),y:Math.abs(Math.random()-s/i)},zIndex:1057,colors:[b],shapes:[l],drift:c(-.5,.5),gravity:c(.5,1),scalar:c(.5,1)})}requestAnimationFrame(d)}}requestAnimationFrame(d)},K=(r,a=50)=>{if(!window.confetti)return;let u=Date.now()+a,i=r.getBoundingClientRect(),m=Math.max(.3,Math.min(1,i.top/window.innerHeight+.2)),o=W(),l=["#FF69B4","#FF1493"],h=()=>{l.forEach(c=>{window.confetti({particleCount:2,angle:60,spread:55,shapes:[o],origin:{x:i.left/window.innerWidth,y:m},zIndex:1057,colors:[c]}),window.confetti({particleCount:2,angle:120,spread:55,shapes:[o],origin:{x:i.right/window.innerWidth,y:m},zIndex:1057,colors:[c]})}),Date.now()<u&&requestAnimationFrame(h)};requestAnimationFrame(h)};var R=r=>{let a=new Map,u=new Map,i=F(r),m=1e3*60*60*6,o=!1,l=(s,b)=>{if(!b.ok)throw new Error(b.statusText);return i.set(s,b,o,m)},h=s=>i.has(s),c=s=>i.del(s),y=(s,b=null)=>{if(a.has(s))return Promise.resolve(a.get(s));if(u.has(s))return u.get(s);let E=()=>k("GET",s).withCancel(b).withRetry().default(),p=h(s).then(g=>g?Promise.resolve(g):c(s).then(E).then(T=>l(s,T))).then(g=>g.blob()).then(g=>a.set(s,URL.createObjectURL(g))).then(()=>a.get(s)).finally(()=>u.delete(s));return u.set(s,p),p};return{run:(s,b=null)=>{let E=new Map;return s.length===0?Promise.resolve():(s.filter(p=>p!==null).forEach(p=>{let g=E.get(p.url)??[];E.set(p.url,[...g,[p.res,p?.rej]])}),Promise.allSettled(Array.from(E).map(([p,g])=>y(p,b).then(T=>(g.forEach(v=>v[0]?.(T)),T)).catch(T=>(g.forEach(v=>v[1]?.(T)),T)))))},del:c,has:h,set:l,get:y,open,download:async(s,b)=>{if(!new Map(Array.from(a.entries()).map(([p,g])=>[g,p])).has(s))try{if(!new URL(s).protocol.includes("blob"))throw new Error("Is not blob")}catch{s=await y(s)}return k("GET",s).withDownload(b).default()},setTtl(s){return m=Number(s),this},withForceCache(){return o=!0,this}}};var re=r=>{let a="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css",u="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js",i=()=>r.get(a).then(o=>new Promise((l,h)=>{let c=document.createElement("link");c.onload=l,c.onerror=h,c.rel="stylesheet",c.href=o,document.head.appendChild(c)})),m=()=>r.get(u).then(o=>new Promise((l,h)=>{let c=document.createElement("script");c.onload=l,c.onerror=h,c.src=o,document.head.appendChild(c)}));return Promise.all([i(),m()]).then(()=>{if(typeof window.AOS>"u")throw new Error("AOS library failed to load");window.AOS.init()})},se=r=>r.get("https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.js").then(u=>new Promise((i,m)=>{let o=document.createElement("script");o.onerror=m,o.onload=()=>{typeof window.confetti>"u"?m(new Error("Confetti library failed to load")):i()},o.src=u,document.head.appendChild(o)})),ae=r=>{let a=[{css:"https://fonts.googleapis.com/css2?family=Sacramento&display=swap",family:"Sacramento"},{css:"https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic&display=swap",family:"Noto Naskh Arabic"}],u=({css:i,family:m})=>r.get(i).then(o=>new Promise((l,h)=>{let c=document.createElement("link");c.onload=l,c.onerror=h,c.rel="stylesheet",c.href=o,document.head.appendChild(c)})).then(()=>document.fonts.load(`1em "${m}"`));return Promise.all(a.map(u))},Q=(r={})=>{let a=[],u=R("libs").withForceCache();return(r?.aos??!0)&&a.push(re(u)),(r?.confetti??!0)&&a.push(se(u)),(r?.additionalFont??!0)&&a.push(ae(u)),Promise.all(a)};var S=(()=>{let r=null,a=null,u=0,i=0,m=!0,o=null;return{init:()=>{r=document.getElementById("progress-info"),a=document.getElementById("progress-bar"),r.classList.remove("d-none")},add:()=>{u+=1},invalid:t=>{m&&(m=!1,a.style.backgroundColor="red",r.innerText=`Error loading ${t}`,document.dispatchEvent(new Event("undangan.progress.invalid")))},complete:(t,s=!1)=>{m&&(i+=1,r.innerText="Loading Thi\u1EC7p m\u1EDDi...",a.style.width=Math.min(i/u*100,100).toString()+"%",i===u&&(m=!1,o=null,document.dispatchEvent(new Event("undangan.progress.done"))))},getAbort:()=>o}})();var X=(()=>{let r='<i class="fa-solid fa-circle-pause spin-button"></i>',a='<i class="fa-solid fa-circle-play"></i>',u=async(o=!0)=>{let l=document.body.getAttribute("data-audio");if(!l){S.complete("audio",!0);return}let h=null;try{h=new Audio(await R("audio").withForceCache().get(l,S.getAbort())),h.loop=!0,h.muted=!1,h.autoplay=!1,h.controls=!1,S.complete("audio")}catch{S.invalid("audio");return}let c=!1,y=document.getElementById("button-music"),d=async()=>{if(!(!navigator.onLine||!y)){y.disabled=!0;try{await h.play(),c=!0,y.disabled=!1,y.innerHTML=r}catch(s){c=!1,x.notify(s).error()}}},t=()=>{c=!1,h.pause(),y.innerHTML=a};document.addEventListener("undangan.open",()=>{y.classList.remove("d-none"),o&&d()}),y.addEventListener("offline",t),y.addEventListener("click",()=>c?t():d())},i=()=>{let o=document.getElementById("button-scroll-top");o&&o.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})};return{init:()=>(i(),{load:u})}})();var Z=(()=>{let r=null,a=null,u=[],i=t=>new Promise((s,b)=>{let E=new Image;E.onload=()=>s(E),E.onerror=b,E.src=t}),m=(t,s)=>i(s).then(b=>{t.width=b.naturalWidth,t.height=b.naturalHeight,t.classList.remove("opacity-0"),t.src=b.src,b.remove(),S.complete("image")}),o=t=>{u.push({url:t.getAttribute("data-src"),res:s=>m(t,s),rej:s=>{console.error(s),S.invalid("image")}})},l=t=>{t.onerror=()=>S.invalid("image"),t.onload=()=>{t.width=t.naturalWidth,t.height=t.naturalHeight,S.complete("image")},t.complete&&t.naturalWidth!==0&&t.naturalHeight!==0?S.complete("image"):t.complete&&S.invalid("image")},h=()=>Array.from(r).some(t=>t.hasAttribute("data-src")),c=async()=>{let t=Array.from(r),s=async b=>{u.length=0,t.filter(b).forEach(E=>E.hasAttribute("data-src")?o(E):l(E)),await a.run(u,S.getAbort())};await s(b=>b.hasAttribute("fetchpriority")),await s(b=>!b.hasAttribute("fetchpriority"))},y=t=>{a.download(t,`${window.location.hostname}_image_${Date.now()}`)};return{init:()=>(a=R("image").withForceCache(),r=document.querySelectorAll("img"),{load:c,download:y,hasDataSrc:h})}})();var Y=(()=>{let r=null,a=()=>{let i=document.getElementById("video-love-stroy");if(!i||!i.hasAttribute("data-src"))return i?.remove(),S.complete("video",!0),Promise.resolve();let m=i.getAttribute("data-src");if(!m)return S.complete("video",!0),Promise.resolve();let o=document.createElement("video");o.className=i.getAttribute("data-vid-class"),o.loop=!0,o.muted=!0,o.controls=!1,o.autoplay=!1,o.playsInline=!0,o.preload="metadata";let l=new IntersectionObserver(y=>y.forEach(d=>d.isIntersecting?o.play():o.pause())),h=y=>{o.preload="auto",o.controls=!0,o.disableRemotePlayback=!0,o.disablePictureInPicture=!0,o.controlsList="noremoteplayback nodownload noplaybackrate",o.src=URL.createObjectURL(y)},c=()=>{let y=document.getElementById("progress-bar-video-love-stroy"),d=document.getElementById("progress-info-video-love-stroy");return k("GET",m).withNoBody().default({Range:"bytes=0-1"}).then(t=>{if(t.status===200)return o.preload="none",o.src=x.escapeHtml(m),i.appendChild(o),Promise.resolve();if(t.status!==206)throw new Error("failed to fetch video");o.addEventListener("error",()=>S.invalid("video"));let s=new Promise(b=>o.addEventListener("loadedmetadata",b,{once:!0}));return o.src=x.escapeHtml(m),i.appendChild(o),s}).then(()=>{o.pause(),o.currentTime=0,S.complete("video");let t=o.getBoundingClientRect().width*(o.videoHeight/o.videoWidth);return o.style.height=`${t}px`,i.style.height=`${t}px`,k("GET",m).withRetry().withProgressFunc((s,b)=>{let E=Number(s/b*100).toFixed(0)+"%";y.style.width=E,d.innerText=E}).default()}).then(t=>t.clone().blob().then(s=>{let b=new Promise(E=>o.addEventListener("loadedmetadata",E,{once:!0}));return h(s),o.load(),b.then(()=>t)})).catch(t=>{y.style.backgroundColor="red",d.innerText="Error loading video",console.error(t)})};return r.has(m).then(y=>y?y.blob().then(d=>{let t=new Promise(s=>o.addEventListener("loadedmetadata",s,{once:!0}));return h(d),i.appendChild(o),t.then(()=>S.complete("video"))}):r.del(m).then(c).then(d=>r.set(m,d))).then(()=>{l.observe(o),o.style.removeProperty("height"),i.style.removeProperty("height"),document.getElementById("video-love-stroy-loading")?.remove()})};return{init:()=>(r=R("video").withForceCache(),{load:a})}})();var ce="131020",ee="261020",te=(()=>{let r=null,a=null,u=()=>{let e=new Date(document.body.getAttribute("data-time").replace(" ","T")).getTime(),n=P=>P<10?`0${P}`:`${P}`,f=document.getElementById("day"),w=document.getElementById("hour"),C=document.getElementById("minute"),I=document.getElementById("second"),L=()=>{let P=Math.abs(e-Date.now());f.textContent=n(Math.floor(P/(1e3*60*60*24))),w.textContent=n(Math.floor(P%(1e3*60*60*24)/(1e3*60*60))),C.textContent=n(Math.floor(P%(1e3*60*60)/(1e3*60))),I.textContent=n(Math.floor(P%(1e3*60)/1e3)),x.timeOut(L,1e3-Date.now()%1e3)};x.timeOut(L)},i=()=>{let e=window.location.search.split("to="),n=null;if(e.length>1&&e[1].length>=1&&(n=window.decodeURIComponent(e[1])),n){let f=document.getElementById("guest-name"),w=document.createElement("div");w.classList.add("m-2");let C=`<small class="mt-0 mb-1 mx-0 p-0">${x.escapeHtml(f?.getAttribute("data-message"))}</small><p class="m-0 p-0" style="font-size: 1.25rem">${x.escapeHtml(n)}</p>`;x.safeInnerHTML(w,C),f?.appendChild(w)}},m=async()=>{let n=document.querySelectorAll(".slide-desktop");if(!n||n.length===0)return;let f=document.getElementById("root")?.querySelector(".d-sm-block");if(!f||(f.dispatchEvent(new Event("undangan.slide.stop")),window.getComputedStyle(f).display==="none"))return;if(n.length===1){await x.changeOpacity(n[0],!0);return}let w=0;for(let[P,q]of n.entries())if(P===w){q.classList.add("slide-desktop-active"),await x.changeOpacity(q,!0);break}let C=!0,I=async()=>(await x.changeOpacity(n[w],!1),n[w].classList.remove("slide-desktop-active"),w=(w+1)%n.length,C&&(n[w].classList.add("slide-desktop-active"),await x.changeOpacity(n[w],!0)),C);f.addEventListener("undangan.slide.stop",()=>{C=!1});let L=async()=>{await I()&&x.timeOut(L,6e3)};x.timeOut(L,6e3)},o=async()=>{let n=window.location.search.replace("?","").split("&").find(I=>I.startsWith("g="))?.split("=")[1]||"1",C=(await(await fetch("./assets/guests/data.json")).json()).find(I=>I.id===n);C&&(document.getElementById("form-name").value=C.name,document.getElementById("guest-name").innerHTML=C.name)},l=()=>{let n=window.location.search.replace("?","").split("&").find(w=>w.startsWith("mode="))?.split("=")[1],f=[ee,ce].includes(n)?n:ee;document.getElementById(f).classList.toggle("d-none")},h=e=>{e.disabled=!0,document.body.scrollIntoView({behavior:"instant"}),document.getElementById("root").classList.remove("opacity-0"),H.isAutoMode()&&document.getElementById("button-theme").classList.remove("d-none"),m(),H.spyTop(),V(),x.timeOut(J,1500),document.dispatchEvent(new Event("undangan.open")),x.changeOpacity(document.getElementById("welcome"),!1).then(n=>n.remove()),o(),l()},c=e=>{document.getElementById("button-modal-click").setAttribute("href",e.src),document.getElementById("button-modal-download").setAttribute("data-src",e.src);let n=document.getElementById("show-modal-image");n.src=e.src,n.width=e.width,n.height=e.height,z.modal("modal-image").show()},y=()=>{document.getElementById("show-modal-image").addEventListener("click",e=>{let n=e.currentTarget.parentNode.querySelector(".position-absolute");n.classList.contains("d-none")?n.classList.replace("d-none","d-flex"):n.classList.replace("d-flex","d-none")})},d=e=>{navigator.vibrate&&navigator.vibrate(500),K(e,100),x.changeOpacity(e,!1).then(n=>n.remove())},t=()=>r.set("info",!0),s=()=>{document.querySelectorAll(".font-arabic").forEach(e=>{e.innerHTML=String(e.innerHTML).normalize("NFC")})},b=()=>{document.querySelectorAll("svg").forEach(e=>{e.hasAttribute("data-class")&&x.timeOut(()=>e.classList.add(e.getAttribute("data-class")),parseInt(e.getAttribute("data-time")))})},E=()=>{let e=w=>new Date(w.replace(" ","T")+":00Z").toISOString().replace(/[-:]/g,"").split(".").shift(),n=new URL("https://calendar.google.com/calendar/render"),f=new URLSearchParams({action:"TEMPLATE",text:"L\u1EC5 c\u01B0\u1EDBi H\u1EEFu Chinh & Thanh Tr\xFAc",dates:`${e("2025-11-23 11:30")}/${e("2025-11-23 17:00")}`,details:"Ch\xFAng t\xF4i h\xE2n h\u1EA1nh m\u1EDDi Qu\xFD v\u1ECB \u0111\u1EBFn chung vui trong ng\xE0y tr\u1ECDng \u0111\u1EA1i c\u1EE7a ch\xFAng t\xF4i. S\u1EF1 c\xF3 m\u1EB7t v\xE0 l\u1EDDi ch\xFAc c\u1EE7a Qu\xFD v\u1ECB ch\xEDnh l\xE0 m\xF3n qu\xE0 \xFD ngh\u0129a nh\u1EA5t.",location:"5J8P+HC7, Th\u1EA1nh Tr\u1ECB, B\xECnh \u0110\u1EA1i, B\u1EBFn Tre",ctz:a.get("vn")});n.search=f.toString(),document.querySelector("#home button")?.addEventListener("click",()=>window.open(n,"_blank"))},p=()=>({load:n=>{Q(n).then(()=>S.complete("libs")).catch(()=>S.invalid("libs"))}}),g=async()=>{b(),u(),i(),y(),s(),E(),r.has("presence")&&(document.getElementById("form-presence").value=r.get("presence")?"1":"2"),r.get("info")&&document.getElementById("information")?.remove(),await x.changeOpacity(document.getElementById("welcome"),!0),await x.changeOpacity(document.getElementById("loading"),!1).then(e=>e.remove())},T=()=>{S.init(),a=O("config"),r=O("information");let e=Y.init(),n=Z.init(),f=X.init(),w=p();g(),window.addEventListener("resize",x.debounce(m)),document.addEventListener("hide.bs.modal",()=>document.activeElement?.blur()),document.getElementById("button-modal-download").addEventListener("click",C=>{n.download(C.currentTarget.getAttribute("data-src"))}),e.load(),n.load(),f.load(),w.load({confetti:document.body.getAttribute("data-confetti")==="true"}),document.dispatchEvent(new Event("undangan.session"))},v=e=>{let n=document.getElementById("form-name");if(n.value.length===0){x.notify("Vui l\xF2ng \u0111i\u1EC1n t\xEAn!").warning(),n.focus();return}let f=document.getElementById("form-presence");if(f&&f.value==="0"){x.notify("Vui l\xF2ng ch\u1ECDn tr\u1EA1ng th\xE1i tham d\u1EF1.").warning();return}let w=document.getElementById("form-comment");if(w&&!w.value){x.notify("Vui l\xF2ng nh\u1EADp l\u1EDDi ch\xFAc c\u1EE7a b\u1EA1n.").warning();return}x.notify("C\u1EA3m \u01A1n b\u1EA1n \u0111\xE3 g\u1EEDi l\u1EDDi ch\xFAc.").info(),e.disabled=!0};return{init:()=>(H.init(),G.init(),window.addEventListener("load",()=>{_.init(T,["image","video","audio","libs"])}),{sendComment:v,util:x,theme:H,guest:{open:h,modal:c,showStory:d,closeInformation:t}})}})();(r=>{r.undangan=te.init()})(window);})();
