(()=>{var _=(()=>{let o={id:"ID",en:"US",fr:"FR",de:"DE",es:"ES",zh:"CN",ja:"JP",ko:"KR",ar:"SA",ru:"RU",it:"IT",nl:"NL",pt:"PT",tr:"TR",th:"TH",vi:"VN",ms:"MY",hi:"IN"},r=null,l=null,a=null,c=null;return{on(n,i){return c.set(n,i),this},get(){let n=c.get(a);return c.clear(),n},getCountry(){return r},getLocale(){return l},getLanguage(){return a},setDefault(n){let i=!0;o[n]||(i=!1,console.warn("Language not found, please add manually in countryMapping")),r=i?o[n]:"US",a=i?n:"en",l=`${a}_${r}`},init(){c=new Map,this.setDefault(navigator.language.split("-").shift())}}})();var x=(()=>{let o='<span class="spinner-border spinner-border-sm my-0 ms-0 me-1 p-0" style="height: 0.8rem; width: 0.8rem;"></span>',r=[["*",'<strong class="text-theme-auto">$1</strong>'],["_",'<em class="text-theme-auto">$1</em>'],["~",'<del class="text-theme-auto">$1</del>'],["```",'<code class="font-monospace text-theme-auto">$1</code>']],l=[{type:"Mobile",regex:/Android.*Mobile|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i},{type:"Tablet",regex:/iPad|Android(?!.*Mobile)|Tablet/i},{type:"Desktop",regex:/Windows NT|Macintosh|Linux/i}],a=[{name:"Chrome",regex:/Chrome|CriOS/i},{name:"Safari",regex:/Safari/i},{name:"Edge",regex:/Edg|Edge/i},{name:"Firefox",regex:/Firefox|FxiOS/i},{name:"Opera",regex:/Opera|OPR/i},{name:"Internet Explorer",regex:/MSIE|Trident/i},{name:"Samsung Browser",regex:/SamsungBrowser/i}],c=[{name:"Windows",regex:/Windows NT ([\d.]+)/i},{name:"MacOS",regex:/Mac OS X ([\d_.]+)/i},{name:"Android",regex:/Android ([\d.]+)/i},{name:"iOS",regex:/OS ([\d_]+) like Mac OS X/i},{name:"Linux",regex:/Linux/i},{name:"Ubuntu",regex:/Ubuntu/i},{name:"Chrome OS",regex:/CrOS/i}],n=e=>String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),i=e=>{let u=p=>{window.alert(`${p} ${e}`)};return{success:()=>u("\u{1F7E9}"),error:()=>u("\u{1F7E5}"),warning:()=>u("\u{1F7E8}"),info:()=>u("\u{1F7E6}"),custom:p=>u(p)}},m=e=>window.confirm(`\u{1F7E6} ${e}`),d=(e,u)=>(e.replaceChildren(document.createRange().createContextualFragment(u)),e),y=(e,u,p=.05)=>new Promise(T=>{let A=parseFloat(e.style.opacity),I=u?1:0,L=()=>{A+=u?p:-p,A=Math.max(0,Math.min(1,A)),e.style.opacity=A.toFixed(2),u&&A>=I||!u&&A<=I?(e.style.opacity=I.toString(),T(e)):requestAnimationFrame(L)};requestAnimationFrame(L)}),h=(e,u=0)=>{let p=null;p=setTimeout(()=>{e(),clearTimeout(p),p=null},u)};return{loader:o,ask:m,copy:async(e,u=null,p=1500)=>{let T=e.getAttribute("data-copy");if(!T||T.length===0){i("Nothing to copy").warning();return}e.disabled=!0;try{await navigator.clipboard.writeText(T)}catch{e.disabled=!1,i("Failed to copy").error();return}let A=e.innerHTML;d(e,u||'<i class="fa-solid fa-check"></i>'),h(()=>{e.disabled=!1,e.innerHTML=A},p)},notify:i,timeOut:h,debounce:(e,u=100)=>{let p=null;return(...T)=>{clearTimeout(p),p=setTimeout(()=>e(...T),u)}},escapeHtml:n,base64Encode:e=>{let p=new TextEncoder().encode(e);return window.btoa(String.fromCharCode(...p))},base64Decode:e=>{let u=new TextDecoder,p=Uint8Array.from(window.atob(e),T=>T.charCodeAt(0));return u.decode(p)},disableButton:(e,u="Loading",p=!1)=>{e.disabled=!0;let T=e.innerHTML;return d(e,p?u:o+u),{restore:(A=!1)=>{e.innerHTML=T,e.disabled=A}}},disableCheckbox:e=>{e.disabled=!0;let u=document.querySelector(`label[for="${e.id}"]`),p=u.innerHTML;return d(u,o+p),{restore:()=>{u.innerHTML=p,e.disabled=!1}}},safeInnerHTML:d,parseUserAgent:e=>{if(!e||typeof e!="string")return"Unknown";let u=l.find(L=>L.regex.test(e))?.type??"Unknown",p=a.find(L=>L.regex.test(e))?.name??"Unknown",T=c.find(L=>L.regex.test(e)),A=T?T.name:"Unknown",I=T?e.match(T.regex)?.[1]?.replace(/_/g,".")??null:null;return`${p} ${u} ${I?`${A} ${I}`:A}`},changeOpacity:y,getGMTOffset:e=>{let u=new Date,p=new Intl.DateTimeFormat("en-US",{timeZone:e,hourCycle:"h23",hour:"numeric"}),T=(parseInt(p.format(u))-u.getUTCHours()+24)%24;return T>12&&(T-=24),`GMT${T>=0?"+":""}${T}`},convertMarkdownToHTML:e=>(r.forEach(([u,p])=>{e=e.replace(new RegExp(`\\${u}(\\S(?:[\\s\\S]*?\\S)?)\\${u}`,"g"),p)}),e)}})();var q=(()=>{let o=null,r=!0,l=["input[data-offline-disabled]","button[data-offline-disabled]","select[data-offline-disabled]","textarea[data-offline-disabled]"],a=()=>r,c=()=>{let t=o.firstElementChild.firstElementChild;t.classList.remove("bg-success"),t.classList.add("bg-danger"),t.firstElementChild.innerHTML='<i class="fa-solid fa-ban me-2"></i>Koneksi tidak tersedia'},n=()=>{let t=o.firstElementChild.firstElementChild;t.classList.remove("bg-danger"),t.classList.add("bg-success"),t.firstElementChild.innerHTML='<i class="fa-solid fa-cloud me-2"></i>Koneksi tersedia kembali'},i=async()=>{r&&(await x.changeOpacity(o,!1),c())},m=()=>{document.querySelectorAll(l.join(", ")).forEach(t=>{t.dispatchEvent(new Event(a()?"online":"offline")),t.setAttribute("data-offline-disabled",a()?"false":"true"),t.tagName==="BUTTON"?a()?t.classList.remove("disabled"):t.classList.add("disabled"):a()?t.removeAttribute("disabled"):t.setAttribute("disabled","true")})},d=()=>{r=!1,c(),x.changeOpacity(o,!0),m()},y=()=>{r=!0,n(),x.timeOut(i,3e3),m()};return{init:()=>{window.addEventListener("online",y),window.addEventListener("offline",d),o=document.createElement("div"),o.classList.add("fixed-top","pe-none"),o.style.cssText="opacity: 0; z-index: 1057;",o.innerHTML=`
        <div class="d-flex justify-content-center mx-auto">
            <div class="d-flex justify-content-center align-items-center rounded-pill my-2 bg-danger shadow">
                <small class="text-center py-1 px-2 mx-1 mt-1 mb-0 text-white" style="font-size: 0.8rem;"></small>
            </div>
        </div>`,document.body.insertBefore(o,document.body.lastChild)},isOnline:a}})();var k=o=>{let r=(i=null)=>{let m=JSON.parse(localStorage.getItem(o));return i?m[String(i)]:m},l=(i,m)=>{let d=r();d[String(i)]=m,localStorage.setItem(o,JSON.stringify(d))},a=i=>Object.keys(r()).includes(String(i)),c=i=>{if(!a(i))return;let m=r();delete m[String(i)],localStorage.setItem(o,JSON.stringify(m))},n=()=>localStorage.setItem(o,"{}");return localStorage.getItem(o)||n(),{set:l,get:r,has:a,clear:n,unset:c}};var N=(()=>{let o=({uuid:h,own:t,name:s,presence:b,comment:v,created_at:g,is_admin:w,is_parent:E,gif_url:C,ip:f,user_agent:e,comments:u,like_count:p})=>({uuid:h,own:t,name:s,presence:b,comment:v,created_at:g,is_admin:w??!1,is_parent:E,gif_url:C,ip:f,user_agent:e,comments:u?.map(o)??[],like_count:p??0}),r=h=>h.map(o);return{uuidResponse:({uuid:h})=>({uuid:h}),tokenResponse:({token:h})=>({token:h}),statusResponse:({status:h})=>({status:h}),getCommentResponse:o,getCommentsResponse:r,getCommentsResponseV2:h=>({count:h.count,lists:r(h.lists)}),commentShowMore:(h,t=!1)=>({uuid:h,show:t}),postCommentRequest:(h,t,s,b,v)=>({id:h,name:t,presence:s,comment:b,gif_id:v}),postSessionRequest:(h,t)=>({email:h,password:t}),updateCommentRequest:(h,t,s)=>({presence:h,comment:t,gif_id:s})}})();var z="POST";var U="AbortError",ne="TypeError",j={Accept:"application/json","Content-Type":"application/json"},G="request",F=(()=>{let o=null;return{getInstance:r=>{if(!o||!o.has(r))throw new Error(`please init cache first: ${r}`);return o.get(r)},restart:async r=>{o.set(r,null),o.delete(r),await window.caches.delete(r),await window.caches.open(r).then(l=>o.set(r,l))},init:(r,l=[])=>{if(!window.isSecureContext)throw new Error("this application required secure context");o=new Map,Promise.all(l.concat([G]).map(a=>window.caches.open(a).then(c=>o.set(a,c)))).then(()=>r())}}})(),$=o=>{let r=F.getInstance(o);return{set:(n,i,m,d)=>i.clone().arrayBuffer().then(y=>{if(!i.ok)return i;let h=new Date,t=new Headers(i.headers);if(t.has("Date")||t.set("Date",h.toUTCString()),m||!t.has("Cache-Control")){if(!m&&t.has("Expires")){let s=new Date(t.get("Expires"));d=Math.max(0,s.getTime()-h.getTime())}if(d===0)throw new Error("Cache max age cannot be 0");t.set("Cache-Control",`public, max-age=${Math.floor(d/1e3)}`)}return t.has("Content-Length")||t.set("Content-Length",String(y.byteLength)),r.put(n,new Response(y,{headers:t})).then(()=>i)}),has:n=>r.match(n).then(i=>{if(!i)return null;let m=i.headers.get("Cache-Control").match(/max-age=(\d+)/)[1],d=Date.parse(i.headers.get("Date"))+parseInt(m)*1e3;return Date.now()>d?null:i}),del:n=>r.delete(n)}},P=(o,r)=>{let l=new AbortController,a={signal:l.signal,credential:"include",headers:new Headers(j),method:String(o).toUpperCase()},c=0,n=0,i=0,m=0,d=!1,y=!1,h=null,t=null,s=null,b=g=>{let w=()=>{let C=()=>window.fetch(g,a).then(async e=>{if(d)return l.abort(),new Response(null,{status:e.status,statusText:e.statusText,headers:new Headers(e.headers)});if(!e.ok||!s)return e;let u=parseInt(e.headers.get("Content-Length")??0);if(u===0)return e;let p=[],T=0,A=e.body.getReader();for(;;){let{done:L,value:R}=await A.read();if(L)break;p.push(R),T+=R.length,await s(T,u,window.structuredClone?window.structuredClone(p):p)}let I=e.headers.get("Content-Type")??"application/octet-stream";return new Response(new Blob(p,{type:I}),{status:e.status,statusText:e.statusText,headers:new Headers(e.headers)})});if(c===0||d)return C();if(a.method!=="GET")return console.warn("Only method GET can be cached"),C();let f=$(G);return f.has(g).then(e=>e?Promise.resolve(e):f.del(g).then(C).then(u=>f.set(g,u,y,c)))};if(n===0||i===0)return w();let E=async()=>{try{return await w()}catch(C){if(C.name===U)throw C;if(i*=2,m++,m>n)throw new Error(`Max retries reached: ${C}`);return console.warn(`Retrying fetch (${m}/${n}): ${g.toString()}`),await new Promise(f=>window.setTimeout(f,i)),E()}};return E()},v=g=>{if(g.status!==200)return Promise.resolve(g);let w=document.querySelector("a[download]");w&&document.body.removeChild(w);let E=g.headers.get("Content-Disposition")?.match(/filename="(.+)"/)?.[1];return g.clone().blob().then(C=>{let f=document.createElement("a"),e=window.URL.createObjectURL(C);return f.href=e,f.download=E||`${t}.${h||(C.type.split("/")?.[1]??"bin")}`,document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(e),g})};return{send(g=null){return t&&Object.keys(j).forEach(w=>a.headers.delete(w)),b(new URL(r,document.body.getAttribute("data-url"))).then(w=>t&&w.ok?v(w).then(E=>({code:E.status,data:E,error:null})):w.json().then(E=>{if(E.error){let C=E.error.at(0),f=w.status>=500;throw new Error(f?`ID: ${E.id}
\u{1F7E5} ${C}`:`\u{1F7E8} ${C}`)}return g&&(E.data=g(E.data)),Object.assign(E,{code:w.status})})).catch(w=>{if(w.name===U)return console.warn("Fetch aborted:",w),w;throw w.name===ne&&(w=new Error("\u{1F7E5} Network error or rate limit exceeded")),alert(w.message??String(w)),w})},withCache(g=1e3*60*60*6){return c=g,this},withForceCache(g=1e3*60*60*6){return y=!0,c===0&&(c=g),this},withNoBody(){return d=!0,this},withRetry(g=3,w=1e3){return n=g,i=w,this},withCancel(g){return g==null?this:((async()=>(await g,l.abort()))(),this)},withDownload(g,w=null){return t=g,h=w,this},withProgressFunc(g=null){return s=g,this},default(g=null){return a.headers=new Headers(g??{}),b(r).then(w=>t?v(w):Promise.resolve(w))},token(g){return g.split(".").length===3?(a.headers.append("Authorization","Bearer "+g),this):(a.headers.append("x-access-key",g),this)},body(g){if(a.method==="GET")throw new Error("GET method does not support body");return a.body=JSON.stringify(g),this}}};var D=(()=>{let o=null,r=()=>o.get("token"),l=h=>o.set("token",h),a=h=>P(z,"/api/session").body(h).send(N.tokenResponse).then(t=>(t.code===200&&l(t.data.token),t.code===200)),c=()=>o.unset("token"),n=()=>String(r()??".").split(".").length===3,i=h=>P("GET","/api/v2/config").withCache(1e3*60*30).withForceCache().token(h).send().then(t=>{if(t.code!==200)throw new Error("failed to get config.");let s=k("config");for(let[b,v]of Object.entries(t.data))s.set(b,v);return l(h),t}),m=()=>{if(!n())return null;try{return JSON.parse(x.base64Decode(r().split(".")[1]))}catch{return null}};return{init:()=>{o=k("session")},guest:i,isValid:()=>n()?(m()?.exp??0)>Date.now()/1e3:!1,login:a,logout:c,decode:m,isAdmin:n,setToken:l,getToken:r}})();var H=(()=>{let o={"#000000":"#ffffff","#ffffff":"#000000","#212529":"#f8f9fa","#f8f9fa":"#212529"},r=["#ffffff","#f8f9fa"],l=["#000000","#212529"],a=!1,c=null,n=null,i=()=>c.set("active","light"),m=()=>c.set("active","dark"),d=w=>{let E=n.getAttribute("content");n.setAttribute("content",w.some(C=>C===E)?o[E]:E)},y=()=>{i(),document.documentElement.setAttribute("data-bs-theme","light"),d(l)},h=()=>{m(),document.documentElement.setAttribute("data-bs-theme","dark"),d(r)},t=(w=null,E=null)=>{let C=c.get("active")==="dark";return w&&E?C?w:E:C};return{init:()=>{switch(c=k("theme"),n=document.querySelector('meta[name="theme-color"]'),c.has("active")||(window.matchMedia("(prefers-color-scheme: dark)").matches?m():i()),document.documentElement.getAttribute("data-bs-theme")){case"dark":m();break;case"light":i();break;default:a=!0}t()?h():y()},spyTop:()=>{let w=C=>C.filter(f=>f.isIntersecting).forEach(f=>{let e=f.target.classList.contains("bg-white-black")?t(l[0],r[0]):t(l[1],r[1]);n.setAttribute("content",e)}),E=new IntersectionObserver(w,{rootMargin:"0% 0% -95% 0%"});document.querySelectorAll("section").forEach(C=>E.observe(C))},change:()=>t()?y():h(),isDarkMode:t,isAutoMode:()=>a}})();var V={tab:l=>window.bootstrap.Tab.getOrCreateInstance(document.getElementById(l)),modal:l=>window.bootstrap.Modal.getOrCreateInstance(document.getElementById(l))};var W=()=>window.confetti.shapeFromPath({path:"M256 472c-6-4-120-79-177-145C49 292 32 259 32 220 32 154 84 104 150 104c39 0 75 18 98 48 23-30 59-48 98-48 66 0 118 50 118 116 0 39-17 72-47 107-57 66-171 141-177 145-3 2-6 2-9 0z",matrix:[.06,0,0,.06,-15,-15]}),J=()=>{window.confetti&&window.confetti({origin:{y:1},zIndex:1057})},K=(o=3e4)=>{if(!window.confetti)return;let r=8,l=3,a=o*1e3,c=performance.now()+a,n=1e3/Math.max(1,r),i=W(),m=["#FFC0CB","#FF1493","#e70e0eff"],d=(t,s)=>Math.random()*(s-t)+t,y=0;function h(t){if(!(t>=c)){if(t-y>=n){y=t;let s=c-t,b=m[Math.random()*m.length|0];for(let v=0;v<l;v++)window.confetti({particleCount:1,startVelocity:0,ticks:Math.max(50,75*(s/a)),origin:{x:Math.random(),y:Math.abs(Math.random()-s/a)},zIndex:1057,colors:[b],shapes:[i],drift:d(-.5,.5),gravity:d(.5,1),scalar:d(.5,1)})}requestAnimationFrame(h)}}requestAnimationFrame(h)},Q=(o,r=50)=>{if(!window.confetti)return;let l=Date.now()+r,a=o.getBoundingClientRect(),c=Math.max(.3,Math.min(1,a.top/window.innerHeight+.2)),n=W(),i=["#FF69B4","#FF1493"],m=()=>{i.forEach(d=>{window.confetti({particleCount:2,angle:60,spread:55,shapes:[n],origin:{x:a.left/window.innerWidth,y:c},zIndex:1057,colors:[d]}),window.confetti({particleCount:2,angle:120,spread:55,shapes:[n],origin:{x:a.right/window.innerWidth,y:c},zIndex:1057,colors:[d]})}),Date.now()<l&&requestAnimationFrame(m)};requestAnimationFrame(m)};var O=o=>{let r=new Map,l=new Map,a=$(o),c=1e3*60*60*6,n=!1,i=(s,b)=>{if(!b.ok)throw new Error(b.statusText);return a.set(s,b,n,c)},m=s=>a.has(s),d=s=>a.del(s),y=(s,b=null)=>{if(r.has(s))return Promise.resolve(r.get(s));if(l.has(s))return l.get(s);let v=()=>P("GET",s).withCancel(b).withRetry().default(),g=m(s).then(w=>w?Promise.resolve(w):d(s).then(v).then(E=>i(s,E))).then(w=>w.blob()).then(w=>r.set(s,URL.createObjectURL(w))).then(()=>r.get(s)).finally(()=>l.delete(s));return l.set(s,g),g};return{run:(s,b=null)=>{let v=new Map;return s.length===0?Promise.resolve():(s.filter(g=>g!==null).forEach(g=>{let w=v.get(g.url)??[];v.set(g.url,[...w,[g.res,g?.rej]])}),Promise.allSettled(Array.from(v).map(([g,w])=>y(g,b).then(E=>(w.forEach(C=>C[0]?.(E)),E)).catch(E=>(w.forEach(C=>C[1]?.(E)),E)))))},del:d,has:m,set:i,get:y,open,download:async(s,b)=>{if(!new Map(Array.from(r.entries()).map(([g,w])=>[w,g])).has(s))try{if(!new URL(s).protocol.includes("blob"))throw new Error("Is not blob")}catch{s=await y(s)}return P("GET",s).withDownload(b).default()},setTtl(s){return c=Number(s),this},withForceCache(){return n=!0,this}}};var re=o=>{let r="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css",l="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js",a=()=>o.get(r).then(n=>new Promise((i,m)=>{let d=document.createElement("link");d.onload=i,d.onerror=m,d.rel="stylesheet",d.href=n,document.head.appendChild(d)})),c=()=>o.get(l).then(n=>new Promise((i,m)=>{let d=document.createElement("script");d.onload=i,d.onerror=m,d.src=n,document.head.appendChild(d)}));return Promise.all([a(),c()]).then(()=>{if(typeof window.AOS>"u")throw new Error("AOS library failed to load");window.AOS.init()})},se=o=>o.get("https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.js").then(l=>new Promise((a,c)=>{let n=document.createElement("script");n.onerror=c,n.onload=()=>{typeof window.confetti>"u"?c(new Error("Confetti library failed to load")):a()},n.src=l,document.head.appendChild(n)})),ae=o=>{let r=[{css:"https://fonts.googleapis.com/css2?family=Sacramento&display=swap",family:"Sacramento"},{css:"https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic&display=swap",family:"Noto Naskh Arabic"}],l=({css:a,family:c})=>o.get(a).then(n=>new Promise((i,m)=>{let d=document.createElement("link");d.onload=i,d.onerror=m,d.rel="stylesheet",d.href=n,document.head.appendChild(d)})).then(()=>document.fonts.load(`1em "${c}"`));return Promise.all(r.map(l))},X=(o={})=>{let r=[],l=O("libs").withForceCache();return(o?.aos??!0)&&r.push(re(l)),(o?.confetti??!0)&&r.push(se(l)),(o?.additionalFont??!0)&&r.push(ae(l)),Promise.all(r)};var S=(()=>{let o=null,r=null,l=0,a=0,c=!0,n=null,i=()=>{l+=1},m=()=>`(${a}/${l}) [${parseInt(a/l*100).toFixed(0)}%]`;return{init:()=>{o=document.getElementById("progress-info"),r=document.getElementById("progress-bar"),o.classList.remove("d-none"),n=new Promise(s=>document.addEventListener("undangan.progress.invalid",s))},add:i,invalid:s=>{c&&(c=!1,r.style.backgroundColor="red",o.innerText=`Error loading ${s} ${m()}`,document.dispatchEvent(new Event("undangan.progress.invalid")))},complete:(s,b=!1)=>{c&&(a+=1,o.innerText=`Loading ${s} ${b?"skipped":"complete"} ${m()}`,r.style.width=Math.min(a/l*100,100).toString()+"%",a===l&&(c=!1,n=null,document.dispatchEvent(new Event("undangan.progress.done"))))},getAbort:()=>n}})();var Y=(()=>{let o='<i class="fa-solid fa-circle-pause spin-button"></i>',r='<i class="fa-solid fa-circle-play"></i>',l=async(n=!0)=>{let i=document.body.getAttribute("data-audio");if(!i){S.complete("audio",!0);return}let m=null;try{m=new Audio(await O("audio").withForceCache().get(i,S.getAbort())),m.loop=!0,m.muted=!1,m.autoplay=!1,m.controls=!1,S.complete("audio")}catch{S.invalid("audio");return}let d=!1,y=document.getElementById("button-music"),h=async()=>{if(!(!navigator.onLine||!y)){y.disabled=!0;try{await m.play(),d=!0,y.disabled=!1,y.innerHTML=o}catch(s){d=!1,x.notify(s).error()}}},t=()=>{d=!1,m.pause(),y.innerHTML=r};document.addEventListener("undangan.open",()=>{y.classList.remove("d-none"),n&&h()}),y.addEventListener("offline",t),y.addEventListener("click",()=>d?t():h())},a=()=>{let n=document.getElementById("button-scroll-top");n&&n.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})};return{init:()=>(S.add(),a(),{load:l})}})();var Z=(()=>{let o=null,r=null,l=[],a=t=>new Promise((s,b)=>{let v=new Image;v.onload=()=>s(v),v.onerror=b,v.src=t}),c=(t,s)=>a(s).then(b=>{t.width=b.naturalWidth,t.height=b.naturalHeight,t.classList.remove("opacity-0"),t.src=b.src,b.remove(),S.complete("image")}),n=t=>{l.push({url:t.getAttribute("data-src"),res:s=>c(t,s),rej:s=>{console.error(s),S.invalid("image")}})},i=t=>{t.onerror=()=>S.invalid("image"),t.onload=()=>{t.width=t.naturalWidth,t.height=t.naturalHeight,S.complete("image")},t.complete&&t.naturalWidth!==0&&t.naturalHeight!==0?S.complete("image"):t.complete&&S.invalid("image")},m=()=>Array.from(o).some(t=>t.hasAttribute("data-src")),d=async()=>{let t=Array.from(o),s=async b=>{l.length=0,t.filter(b).forEach(v=>v.hasAttribute("data-src")?n(v):i(v)),await r.run(l,S.getAbort())};await s(b=>b.hasAttribute("fetchpriority")),await s(b=>!b.hasAttribute("fetchpriority"))},y=t=>{r.download(t,`${window.location.hostname}_image_${Date.now()}`)};return{init:()=>(r=O("image").withForceCache(),o=document.querySelectorAll("img"),o.forEach(S.add),{load:d,download:y,hasDataSrc:m})}})();var ee=(()=>{let o=null,r=()=>{let a=document.getElementById("video-love-stroy");if(!a||!a.hasAttribute("data-src"))return a?.remove(),S.complete("video",!0),Promise.resolve();let c=a.getAttribute("data-src");if(!c)return S.complete("video",!0),Promise.resolve();let n=document.createElement("video");n.className=a.getAttribute("data-vid-class"),n.loop=!0,n.muted=!0,n.controls=!1,n.autoplay=!1,n.playsInline=!0,n.preload="metadata";let i=new IntersectionObserver(y=>y.forEach(h=>h.isIntersecting?n.play():n.pause())),m=y=>{n.preload="auto",n.controls=!0,n.disableRemotePlayback=!0,n.disablePictureInPicture=!0,n.controlsList="noremoteplayback nodownload noplaybackrate",n.src=URL.createObjectURL(y)},d=()=>{let y=document.getElementById("progress-bar-video-love-stroy"),h=document.getElementById("progress-info-video-love-stroy");return P("GET",c).withNoBody().default({Range:"bytes=0-1"}).then(t=>{if(t.status===200)return n.preload="none",n.src=x.escapeHtml(c),a.appendChild(n),Promise.resolve();if(t.status!==206)throw new Error("failed to fetch video");n.addEventListener("error",()=>S.invalid("video"));let s=new Promise(b=>n.addEventListener("loadedmetadata",b,{once:!0}));return n.src=x.escapeHtml(c),a.appendChild(n),s}).then(()=>{n.pause(),n.currentTime=0,S.complete("video");let t=n.getBoundingClientRect().width*(n.videoHeight/n.videoWidth);return n.style.height=`${t}px`,a.style.height=`${t}px`,P("GET",c).withRetry().withProgressFunc((s,b)=>{let v=Number(s/b*100).toFixed(0)+"%";y.style.width=v,h.innerText=v}).default()}).then(t=>t.clone().blob().then(s=>{let b=new Promise(v=>n.addEventListener("loadedmetadata",v,{once:!0}));return m(s),n.load(),b.then(()=>t)})).catch(t=>{y.style.backgroundColor="red",h.innerText="Error loading video",console.error(t)})};return o.has(c).then(y=>y?y.blob().then(h=>{let t=new Promise(s=>n.addEventListener("loadedmetadata",s,{once:!0}));return m(h),a.appendChild(n),t.then(()=>S.complete("video"))}):o.del(c).then(d).then(h=>o.set(c,h))).then(()=>{i.observe(n),n.style.removeProperty("height"),a.style.removeProperty("height"),document.getElementById("video-love-stroy-loading")?.remove()})};return{init:()=>(S.add(),o=O("video").withForceCache(),{load:r})}})();var te=(()=>{let o=null,r=null,l=()=>{let f=new Date(document.body.getAttribute("data-time").replace(" ","T")).getTime(),e=L=>L<10?`0${L}`:`${L}`,u=document.getElementById("day"),p=document.getElementById("hour"),T=document.getElementById("minute"),A=document.getElementById("second"),I=()=>{let L=Math.abs(f-Date.now());u.textContent=e(Math.floor(L/(1e3*60*60*24))),p.textContent=e(Math.floor(L%(1e3*60*60*24)/(1e3*60*60))),T.textContent=e(Math.floor(L%(1e3*60*60)/(1e3*60))),A.textContent=e(Math.floor(L%(1e3*60)/1e3)),x.timeOut(I,1e3-Date.now()%1e3)};x.timeOut(I)},a=()=>{let f=window.location.search.split("to="),e=null;if(f.length>1&&f[1].length>=1&&(e=window.decodeURIComponent(f[1])),e){let u=document.getElementById("guest-name"),p=document.createElement("div");p.classList.add("m-2");let T=`<small class="mt-0 mb-1 mx-0 p-0">${x.escapeHtml(u?.getAttribute("data-message"))}</small><p class="m-0 p-0" style="font-size: 1.25rem">${x.escapeHtml(e)}</p>`;x.safeInnerHTML(p,T),u?.appendChild(p)}},c=async()=>{let e=document.querySelectorAll(".slide-desktop");if(!e||e.length===0)return;let u=document.getElementById("root")?.querySelector(".d-sm-block");if(!u||(u.dispatchEvent(new Event("undangan.slide.stop")),window.getComputedStyle(u).display==="none"))return;if(e.length===1){await x.changeOpacity(e[0],!0);return}let p=0;for(let[L,R]of e.entries())if(L===p){R.classList.add("slide-desktop-active"),await x.changeOpacity(R,!0);break}let T=!0,A=async()=>(await x.changeOpacity(e[p],!1),e[p].classList.remove("slide-desktop-active"),p=(p+1)%e.length,T&&(e[p].classList.add("slide-desktop-active"),await x.changeOpacity(e[p],!0)),T);u.addEventListener("undangan.slide.stop",()=>{T=!1});let I=async()=>{await A()&&x.timeOut(I,6e3)};x.timeOut(I,6e3)},n=f=>{f.disabled=!0,document.body.scrollIntoView({behavior:"instant"}),document.getElementById("root").classList.remove("opacity-0"),H.isAutoMode()&&document.getElementById("button-theme").classList.remove("d-none"),c(),H.spyTop(),J(),x.timeOut(K,1500),document.dispatchEvent(new Event("undangan.open")),x.changeOpacity(document.getElementById("welcome"),!1).then(e=>e.remove())},i=f=>{document.getElementById("button-modal-click").setAttribute("href",f.src),document.getElementById("button-modal-download").setAttribute("data-src",f.src);let e=document.getElementById("show-modal-image");e.src=f.src,e.width=f.width,e.height=f.height,V.modal("modal-image").show()},m=()=>{document.getElementById("show-modal-image").addEventListener("click",f=>{let e=f.currentTarget.parentNode.querySelector(".position-absolute");e.classList.contains("d-none")?e.classList.replace("d-none","d-flex"):e.classList.replace("d-flex","d-none")})},d=f=>{navigator.vibrate&&navigator.vibrate(500),Q(f,100),x.changeOpacity(f,!1).then(e=>e.remove())},y=()=>o.set("info",!0),h=()=>{document.querySelectorAll(".font-arabic").forEach(f=>{f.innerHTML=String(f.innerHTML).normalize("NFC")})},t=()=>{document.querySelectorAll("svg").forEach(f=>{f.hasAttribute("data-class")&&x.timeOut(()=>f.classList.add(f.getAttribute("data-class")),parseInt(f.getAttribute("data-time")))})},s=()=>{let f=p=>new Date(p.replace(" ","T")+":00Z").toISOString().replace(/[-:]/g,"").split(".").shift(),e=new URL("https://calendar.google.com/calendar/render"),u=new URLSearchParams({action:"TEMPLATE",text:"L\u1EC5 c\u01B0\u1EDBi H\u1EEFu Chinh & Thanh Tr\xFAc",dates:`${f("2025-11-23 11:30")}/${f("2025-11-23 17:00")}`,details:"Ch\xFAng t\xF4i h\xE2n h\u1EA1nh m\u1EDDi Qu\xFD v\u1ECB \u0111\u1EBFn chung vui trong ng\xE0y tr\u1ECDng \u0111\u1EA1i c\u1EE7a ch\xFAng t\xF4i. S\u1EF1 c\xF3 m\u1EB7t v\xE0 l\u1EDDi ch\xFAc c\u1EE7a Qu\xFD v\u1ECB ch\xEDnh l\xE0 m\xF3n qu\xE0 \xFD ngh\u0129a nh\u1EA5t.",location:"5J8P+HC7, Th\u1EA1nh Tr\u1ECB, B\xECnh \u0110\u1EA1i, B\u1EBFn Tre",ctz:r.get("vn")});e.search=u.toString(),document.querySelector("#home button")?.addEventListener("click",()=>window.open(e,"_blank"))},b=()=>(S.add(),{load:e=>{X(e).then(()=>S.complete("libs")).catch(()=>S.invalid("libs"))}}),v=async()=>{t(),l(),a(),m(),h(),s(),o.has("presence")&&(document.getElementById("form-presence").value=o.get("presence")?"1":"2"),o.get("info")&&document.getElementById("information")?.remove(),await x.changeOpacity(document.getElementById("welcome"),!0),await x.changeOpacity(document.getElementById("loading"),!1).then(f=>f.remove())},g=()=>{_.init(),q.init(),S.init(),r=k("config"),o=k("information");let f=ee.init(),e=Z.init(),u=Y.init(),p=b(),T=document.body.getAttribute("data-key");window.addEventListener("resize",x.debounce(c)),document.addEventListener("undangan.progress.done",()=>v()),document.addEventListener("hide.bs.modal",()=>document.activeElement?.blur()),document.getElementById("button-modal-download").addEventListener("click",A=>{e.download(A.currentTarget.getAttribute("data-src"))}),(!T||T.length<=0)&&(document.getElementById("comment")?.remove(),document.querySelector('a.nav-link[href="#comment"]')?.closest("li.nav-item")?.remove(),f.load(),e.load(),u.load(),p.load({confetti:document.body.getAttribute("data-confetti")==="true"})),T&&T.length>0&&(S.add(),S.add(),e.hasDataSrc()||e.load(),document.dispatchEvent(new Event("undangan.session")),e.hasDataSrc()&&e.load(),f.load(),u.load(),p.load({confetti:!0}),S.complete("config"),S.complete("comment"))},w=async()=>{let e=window.location.search.replace("?","").split("&").find(A=>A.startsWith("g="))?.split("=")[1]||"1",T=(await(await fetch("./assets/guests/data.json")).json()).find(A=>A.id===e);T&&(document.getElementById("form-name").value=T.name,document.getElementById("guest-name").innerHTML=T.name)},E=f=>{let e=document.getElementById("form-name");if(e.value.length===0){x.notify("Vui l\xF2ng \u0111i\u1EC1n t\xEAn!").warning(),e.focus();return}let u=document.getElementById("form-presence");if(u&&u.value==="0"){x.notify("Vui l\xF2ng ch\u1ECDn tr\u1EA1ng th\xE1i tham d\u1EF1.").warning();return}let p=document.getElementById("form-comment");if(p&&!p.value){x.notify("Vui l\xF2ng nh\u1EADp l\u1EDDi ch\xFAc c\u1EE7a b\u1EA1n.").warning();return}x.notify("C\u1EA3m \u01A1n b\u1EA1n \u0111\xE3 g\u1EEDi l\u1EDDi ch\xFAc.").info(),f.disabled=!0};return{init:()=>(H.init(),D.init(),D.isAdmin()&&(k("user").clear(),k("owns").clear(),k("likes").clear(),k("session").clear()),window.addEventListener("load",()=>{F.init(g,["image","video","audio","libs"])}),w(),{sendComment:E,util:x,theme:H,guest:{open:n,modal:i,showStory:d,closeInformation:y}})}})();(o=>{o.undangan=te.init()})(window);})();
